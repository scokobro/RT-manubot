<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Scott Koga-Browes" />
  <meta name="dcterms.date" content="2020-09-15" />
  <meta name="keywords" content="markdown, publishing, manubot" />
  <title>Radio Towers - National</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/master/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta name="dc.title" content="Radio Towers - National" />
  <meta name="citation_title" content="Radio Towers - National" />
  <meta property="og:title" content="Radio Towers - National" />
  <meta property="twitter:title" content="Radio Towers - National" />
  <meta name="dc.date" content="2020-09-15" />
  <meta name="citation_publication_date" content="2020-09-15" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Scott Koga-Browes" />
  <meta name="citation_author_institution" content="College of IR, Ritsumeikan University" />
  <meta name="citation_author_orcid" content="0000-0002-9963-3830" />
  <meta name="twitter:creator" content="@scokobro" />
  <link rel="canonical" href="https://scokobro.github.io/RT-manubot/" />
  <meta property="og:url" content="https://scokobro.github.io/RT-manubot/" />
  <meta property="twitter:url" content="https://scokobro.github.io/RT-manubot/" />
  <meta name="citation_fulltext_html_url" content="https://scokobro.github.io/RT-manubot/" />
  <meta name="citation_pdf_url" content="https://scokobro.github.io/RT-manubot/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://scokobro.github.io/RT-manubot/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://scokobro.github.io/RT-manubot/v/3190193bdeb9821510037411b9d187431980a4bb/" />
  <meta name="manubot_html_url_versioned" content="https://scokobro.github.io/RT-manubot/v/3190193bdeb9821510037411b9d187431980a4bb/" />
  <meta name="manubot_pdf_url_versioned" content="https://scokobro.github.io/RT-manubot/v/3190193bdeb9821510037411b9d187431980a4bb/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Radio Towers - National</h1>
</header>
<p><small><em>
This manuscript
(<a href="https://scokobro.github.io/RT-manubot/v/3190193bdeb9821510037411b9d187431980a4bb/">permalink</a>)
was automatically generated
from <a href="https://github.com/scokobro/RT-manubot/tree/3190193bdeb9821510037411b9d187431980a4bb">scokobro/RT-manubot@3190193</a>
on September 15, 2020.
</em></small></p>
<h2 id="authors">Authors</h2>
<ul>
<li><strong>Scott Koga-Browes</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0002-9963-3830">0000-0002-9963-3830</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/scokobro">scokobro</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/scokobro">scokobro</a><br>
<small>
College of IR, Ritsumeikan University
</small></li>
</ul>
<h2 class="page_break_before" id="abstract">Abstract</h2>
<h1 id="introduction">Introduction</h1>
<p>As the subject of this paper is probably unfamiliar, it is best to start with a straightforward description before looking back over the period in which these ‘radio towers’ appeared, flourished and, largely, disappeared: The radio towers discussed here are public radio receivers mounted typically in a 2m tall concrete or wooden ‘tower’ in a public place, typically a park.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> These towers, ultimately somewhere in the region of 400 of them, were erected around Japan between 1932 and the end of the second world war. The overwhelming majority are now lost, many destroyed in the allied bombing which destroyed much of the urban landscape, but there are roughly 40 known to be still standing. These radio towers are a now rare material reminder of the largely ephemeral practise of radio listening, importantly they are a <em>public</em> resource available to anyone with an interest in prewar Japan’s mass media, and to those involved in teaching the social history of the period.</p>
<p>This paper offers a brief description of the media landscape in which the radio towers appeared. documents their growth and spread and offers brief descriptions of several examples. We start by looking at some examples as it is best to establish exactly what kind of object, in what kind of setting, we are talking about here (see <a href="#fig:komatsu">1</a>). The examples are all to be found in the Kyoto City area but can be considered representative of the typical types of towers found around the rest of the country.</p>
<h2 class="unnumbered" id="komatsubara-park-radio-tower">Komatsubara Park Radio Tower</h2>
<div id="fig:komatsu" class="fignos">
<figure>
<img src="images/komatsubara1000x1000.jpg" style="width:60.0%" alt="" /><figcaption><span>Figure 1:</span> Radio tower in Komatsubara Park, northwest Kyoto City.</figcaption>
</figure>
</div>
<p>The radio tower shown here is positioned in the southwest corner of a smallish public park (Komatsuba Park) in a suburban area in the northwest of Kyoto City; it is fairly typical in its design and size; primarily constructed from reinforced concrete with a roughly square cross-section, flared towards the base, and standing 2.7 m tall. It has openings in all of its faces near the top, behind which the original speakers would have been installed, and is surmounted by a gently curving gable roof. On the front face is a plaque inscribed with a four-character idiom along the lines of <em>mens sana in corpore sano</em> (a healthy mind in a healthy body), which might seem a somewhat incongruous message to put on a public radio until one considers the contemporary connection between radio and sport and exercise (see <span class="citation" data-cites="sec:taiso">(<span class="citeproc-not-found" data-reference-id="sec:taiso"><strong>???</strong></span>)</span>). The plaque also tells us when the tower was put in place, mentioning as it does that it was erected as part of the commemorative events connected with the ‘year 2600’ festivities of 1940 (see <span class="citation" data-cites="sec:kigen26">(<span class="citeproc-not-found" data-reference-id="sec:kigen26"><strong>???</strong></span>)</span>).</p>
<div id="fig:plan" class="fignos">
<figure>
<img src="images/komatsu-plan-scale.png" style="width:60.0%" alt="" /><figcaption><span>Figure 2:</span> Plan showing position of radio tower and contemporary features. Areas in grey show indicate roads and buildings.</figcaption>
</figure>
</div>
<p>As can be seen in <a href="#fig:plan">2</a>, Komatsubara Park, as well as its radio tower, is also home to two other contemporary features; the <em>fujidana</em> wisteria trellis — designed to provide covering shade of foliage for the seating below during the summer months, and a concrete flagpole stand. These three elements seem to be more or less standard accessories for these small urban parks laid out in the interwar years. Indeed some radio towers were designed to perform a dual function as housing for a radio receiver and as a support for a flagpole. The radio tower shown in <a href="#fig:murasaki">3</a> has a long semicircular indentation running up the length of its rear face, it seems likely that it was used as a flagpole support. These remaining radio towers are a physical embodiment of the link between mass, public radio listening and the nation, in this case manifested in the national flag.</p>
<h2 class="unnumbered" id="murasakinoyanagi-park-radio-tower">Murasakinoyanagi Park Radio Tower</h2>
<div id="fig:murasaki" class="fignos">
<figure>
<img src="images/murasakino1000x750.jpg" style="width:60.0%" alt="" /><figcaption><span>Figure 3:</span> Murasakinoyanagi Park (Kyoto City) radio tower, embedded in a contemporary seating area at the east end of the park.</figcaption>
</figure>
</div>
<p>‘Radio towers’ are perhaps a footnote (occasionally literally so, see <span class="citation" data-cites="g8M5rrOK">Kasza (<a href="#ref-g8M5rrOK" role="doc-biblioref">1988</a>)</span>, p252 n3) in the early history of the mass media in Japan but an interesting and informative one nonetheless.</p>
<div id="fig:murasaki-plan" class="fignos">
<figure>
<img src="images/murasaki-plan.png" style="width:70.0%" alt="" /><figcaption><span>Figure 4:</span> Plan of Murasakinoyanagi Park indicating position of radio tower and seating area</figcaption>
</figure>
</div>
<p>Erected in 1941, this tower (<a href="#fig:murasaki">3</a>) is an example of the ‘modern’ style and is part of a more integrated setting; situated at the western end of a long narrow park in the north of Kyoto it is the centrepiece of a seating area made up of a raised concrete platform with integrated benches along three sides. These are all decorated with the parallel linear grooved patterns common in Japanese ‘art deco’ buildings of this period. The rear face of the radio tower has a semicircular groove running from its peak to its base, this is probably a mount for a flagpole.</p>
<h2 class="unnumbered" id="hagi-jidō-park-radio-tower">Hagi-jidō Park Radio Tower</h2>
<p>Stylistically, this tower, again put up in 1941, seems to fall into the ‘other’ category; while sharing a similar geometric-linear design it is somewhat unusual in that it has a definite front and back which is not related to its position in the park, that is it ‘points’ in one particular direction despite being located more or less in the centre of the park. On the front face one can still read the letters JOOK, the station sign of the Kyoto NHK station. A plaque below this is now illegible but there is another on its rear face which can still be read, it gives details of some of the individuals who contributed to its construction and gives the date of its dedication as ‘<em>kigen</em> 2601’ (1941).</p>
<div id="fig:hagijido" class="fignos">
<figure>
<img src="images/hagijido435x750.png" style="width:70.0%" alt="" /><figcaption><span>Figure 5:</span> Hagi-jido Park radio tower</figcaption>
</figure>
</div>
<div id="fig:hagi-plan" class="fignos">
<figure>
<img src="images/hagi-jido-plan.png" alt="" /><figcaption><span>Figure 6:</span> Hagi-jido Park plan, shows the position of the radio tower and other typical period features, <em>fujidana</em> and flagpole stand.</figcaption>
</figure>
</div>
<h2 id="radio-around-the-world-in-1930s">Radio around the world in 1930s</h2>
<p>The mass-media world into which radio emerged in the mid 1920s was dominated by the popular press and cinema; this was the case in Japan as it was in other developed countries. This section will offer a brief overview of this media landscape, drawing parallels and contrasts with the ‘club’ of powerful nations around the world that often provided models for Japan’s own development.</p>
<p>In the UK the 1920s saw the death of much local press and the rise of cheaper nationals aimed at a general, rather than a politically partisan, mass audience.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Japan went through similar changes; regional and city newspapers — emergence of a national press. Fall in local diversity replaced by higher — though not particularly high — degree of nationwide ‘informational cohesion’. Both the BBC (British Broadcasting Company, later ‘Corporation’), which started regular programming in 1922, and NHK (<em>Nihon Hōsō Kyōkai</em>, Japan Broadcasting Corporation), formed in 1925 and making use of ideas and structures from the BBC. The BBC, then still a private company, had become the primary source for nationwide news during the General Strike of May 1925, when newspaper production had been interrupted. Setting aside discussion of the journalistic quality of its coverage of the General Strike, the BBC demonstrated that radio could play an important national role at a time of social, and political, conflict.</p>
<p>While the BBC was emphatically a <em>London-based</em> national broadcaster, a contrasting model of region-first broadcasting was established in Germany. Radio in Germany started during 1923–4 — as it later did in Japan — with the establishment of local companies, in Germany’s case nine of them, which were later given nationwide, and indeed international, reach by the establishment of the Deutsches Welle transmission system in 1926.</p>
<p>Funding for both the German and British systems relied (in part for Germany) on a license fee. The BBC’s funding model — a 10 shilling annual licence — had been conceived of as a way to insulate radio broadcasting from both commercial and political pressure, allowing it to achieve Director-General Reith’s vision of bringing ‘the best’ to every household, to ‘inform, educate and entertain’. This funding model was also adopted by NHK, rejecting the commercial model established by the earliest stations in the US. NHK was intimately, and ‘naturally’ it was thought, linked to the nation and funded through the sale of licences to owners of receiving equipment. The dominant thinking during the process of establishing on what basis NHK should be allowed to operate was that those who benefited from radio broadcasting — primarily listeners and the manufacturers of receivers — should pay for it. Based on an initial projection of number of probable subscribers, the cost of a monthly license was set at ¥2 in Tokyo and Nagoya, and ¥1.5 in Osaka. However as the number of applications for licenses far exceeded initial predictions, license fees rapidly fell, to ¥1 in Jan 1926, then to ¥0.75 in April 1932. By 1935 the cost of a licence had fallen to just a quarter of its original price and cost ¥0.5.<span class="citation" data-cites="RDKr7gbL">(NHK / Kobayashi Shichirō, <a href="#ref-RDKr7gbL" role="doc-biblioref">1935</a>, p. 255)</span>.</p>
<!-- see factsheets etc -->
<h1 id="mass-media-in-1930s-japan">Mass Media in 1930s Japan</h1>
<p>This section outlines the structures and relationships between the various elements of the already existing mass media of 1930s Japan, the cinema and newspapers, with the newly emerging media of broadcast radio. I hope to show how, what we would now term ‘cross-promotion’ helped to integrate radio listening into the everyday life of much of the populace, especially those based in the growing cities.</p>
<h2 class="unnumbered" id="film-and-radio">Film and Radio</h2>
<!--623-->
<p>The development of cinema-going in Japan was similar to that in many countries; projection cinema reached Japan in 1897 with the arrival of both the French Cinématographe Lumière and the American Edison Vitasacope <span class="citation" data-cites="16rXryAuj">(Anderson &amp; Richie, <a href="#ref-16rXryAuj" role="doc-biblioref">1982</a>, p. 22)</span>. At first films were exhibited in any structure that could accommodate a screen, projector and audience, often a theatre (ie. used for dramas or live musical performances) it was not until the early 1920s that the first purpose-built cinemas appeared. By the early 1930s cinema-going was a part of daily life for many in Japan’s urban centres, interest sustained by the increasingly numerous film magazines, newspaper reviews and cinema columns, and publication of screening schedules for major entertainment centres such as Tokyo’s Asakusa district. <!-- Source: ∆QKJMSA -->Despite the worldwide economic depression, decreases in the price of cinema tickets led to growth in audiences at Tokyo’s cinemas, centred in around Asakusa. In 1929 yearly audiences at Asakusa’s 35 cinemas were in the region of 1.3 million people, for the 185 cinemas in a round Tokyo, January 1930’s total audience was 4.1 million people up from the previous January’s 3.3 million, and audiences for subsequent months were showing year-on-year increases of 300,000 people. (‘<em>Nenshu roku-sen-man-en de zeikin wazuka ni-man-en</em>’, Tokyo Asahi Shimbun, 8 July 1930, p 11)</p>
<p>The early content of cinema programs was a mix of domestic and imported productions, with all the diversity of opinion and form that implies. As High <span class="citation" data-cites="fkz8rmFw">(<a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, p. 8)</span> points out that, until events in Manchuria tilted Japan towards war in 1931, there was little that could be identified as a consistent approach or political outlook across film-makers — films were produced which invited sympathy for pacifism, and others that celebrated ‘Japan’s age-old “military spirit”’;</p>
<blockquote>
<p>After 1931, and the feeling that through the intervention of foreign powers Japan had been cheated of the spoils of victory it deserved - this led to a increased determination is some quarters, including film makers, to contribute to a renewed ‘steeling’ of the nation. <span class="citation" data-cites="fkz8rmFw">High (<a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, pp. 8–9)</span></p>
</blockquote>
<p>The film industry retained a degree of diversity, often coping rather by avoiding the issues of the day <span class="citation" data-cites="fkz8rmFw">(High, <a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, p. 19)</span>, until it was finally bound to the state by means of the Film Law of 1939 <span class="citation" data-cites="alZ6afOh">(Makino, <a href="#ref-alZ6afOh" role="doc-biblioref">2000</a>)</span>.</p>
<p>As far as the interactions between film and radio are concerned we can identify many which were reminiscent of that in other countries and one in particular that was a product of one of the most characteristic features of early cinema in Japan; the presence of a <em>benshi</em> (narrator) for silent films. One early experiment involved having well-known <em>benshi</em> narrate live on radio; this was described by one commentator as like being stuck outside the cinema unable to get in to watch the film. This frustrating program was soon abandoned.</p>
<p>While radio grew into an already populated landscape of mass culture, it brought something new and revolutionary, liveness:</p>
<blockquote>
<p>The emergence of radio did more than thicken the mass-media and decades: It brought it to explosive, ‘critical mass.’ In the 1880s, the advent of mass-circulation newspapers had created a sense of nationwide, cultural homogeneity and, more significantly, a certain sense or ‘current events’ immediacy. But the impression they provided of a universally shared moment involved a certain time lag – it was ‘nowadays,’ or at best, ‘this week,’ the past several days. The new shared moment, born with the radio, was the thoroughly modern, instantaneous now. <span class="citation" data-cites="fkz8rmFw">(High, <a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, p. 27)</span></p>
</blockquote>
<p>This property was to become increasingly important as the 1930s progressed, offering the state techniques to promote and emphasise national unity, and a oneness of mind and body that bound all Japanese to the national purpose.</p>
<h2 class="unnumbered" id="newspapers-magazines-and-radio">Newspapers, magazines and radio</h2>
<p>Japan’s first newspapers were effectively imports, the creations of foreigners active in the treaty ports during the years after the Meiji Restoration (1868). A genuine domestic press — Japanese news created by Japanese reporters and editors, and aimed at a Japanese readership, had to wait until there was sufficient knowledge and experience in the local community, and the inherent difficulties of producing a newspapers in the Japanese language, with its complex non-alphabetic script, had been overcome by printers. By the start of the 1920s the domestic newspaper market had undergone a series of transformations with changes to the variety and scale of papers, their relationship with sponsors (political and financial, often the same people), and that with their audiences having led to a newspaper ‘system’ — consisting of a diversity of papers ranging from cheaper, more popular, mass circulation papers to more specialised ones aimed at a particular narrower type of reader — that might have been recognisable in many countries around the world at the time.</p>
<blockquote>
<p>By the 1920s, newspapers like the Tokyo-based <em>Mainichi shinbun</em> or <em>Asahi shinbun</em> already reached daily circulations of more than a million copies and the inaugural issue of Kodansha’s popular magazine <em>Kingu</em> sold the enormous number of 750,000 copies <span class="citation" data-cites="PahDbwPO">Schäfer (<a href="#ref-PahDbwPO" role="doc-biblioref">2012</a>, p. 15)</span></p>
</blockquote>
<p>The growth of radio was a boon for many newspapers, in particular the Yomiuri. In August 1923 the Yomiuri newspaper moved its headquarters to newly built premises near the modern day Ginza in Tokyo, two weeks later on 1 Sep 1923 they it destroyed in the Great Kantō Earthquake. Future television and baseball entrepreneur Shōriki Matsutaro took over as president in February 1924 and, partly thanks to his innovative attitude to coverage of the newly popular phenomenon of radio, was able to rebuild the paper over the following years. The Yomiuri was the first newspaper to publish a specific radio supplement; in 1925 its readership was still fairly small, in the region of approximately 50,000, it was said to have increased its sales by ‘thousands per month’ in the period after its decision to start including its pink-paper ‘Yomiuri Rajio-ban’ supplement <span class="citation" data-cites="128OX7hD2">(NHK, <a href="#ref-128OX7hD2" role="doc-biblioref">2001</a>, p. 36)</span>. By 1932 all the major Tokyo newspapers were printing a radio special, or had a page or column, dedicated to radio programming, with the intention of appealing to the gradually growing radio audience, the Yomiuri’s version seems to have maintained its appeal by concentrating on reproducing the lyrics of songs scheduled to appear in the day’s radio broadcasts <span class="citation" data-cites="WICO0eWk">NHK / Kobayashi Shichirō (<a href="#ref-WICO0eWk" role="doc-biblioref">1932</a>, pp. 74–5)</span>.</p>
<p>Newspapers played a primary role in informing their readers of the day’s radio schedule, delivering printed information into the home every morning, and for many every evening too, this was something which NHK on its own was unable to do. In the longer term this had the effect — no doubt inevitable — of shifting the populace’s information-seeking activities away from print as radio built up its news broadcasting; over the decade from 1932 children began to obtain more and more of their information about the world from the radio;</p>
<blockquote>
<p>compared to 1932, the influence of the radio had significantly increased in 1942: 37.1% of the children obtained their news on current affairs from newspapers and the radio, 36.6% merely from the radio and only 13.3% exclusively from the press. <span class="citation" data-cites="PahDbwPO">Schäfer (<a href="#ref-PahDbwPO" role="doc-biblioref">2012</a>, p. 58)</span></p>
</blockquote>
<p>Radio, as both a technology and as a form of entertainment and communication, as well as providing material for the already operating newspaper industry, gave birth to an extensive popular periodical literature all of its own; the <em>1937 NHK Radio Yearbook</em>, as well as the 47 publications produced by NHK itself, lists 38 radio-related ‘newspapers’, including some dailies, such as the <em>Denki Nippō</em> (Electric Times), and many other published weekly or 3 times per month. Also 35 magazines, most of which were monthlies retailing for 0.1 – 0.8 yen per issue <span class="citation" data-cites="eTcyG1Ky">NHK / Kobayashi Shichirō (<a href="#ref-eTcyG1Ky" role="doc-biblioref">1937</a>, pp. 313–7)</span>. By 1941 the number of newspapers listed had declined to 31 but the magazine listing had nearly doubled to 60 <span class="citation" data-cites="13lUMMFet">NHK / Matsuda Gi’ichiro (<a href="#ref-13lUMMFet" role="doc-biblioref">1942</a>, pp. 589–92)</span>, again the majority of these were monthlies. Many of these magazines were aimed at hobbyists and those interested in the rapidly developing cutting-edge technology of radio; titles often reference scientific terminology, <em>Ohm</em> was a 0.5 yen monthly published in Kanda, Tokyo, alongside it was its slightly cheaper sister publication <em>Watt</em> (ibid. p590).</p>
<p>SUMMARY PAR - TODO</p>
<h2 id="nhk">NHK</h2>
<p>Radio in this period means the broadcasts of the <em>Nihon Hōsō Kyōkai</em> (NHK, the Japan Broadcasting Corporation); the stations that were to be merged into a single national company in 1926 started broadcasting in 1925 in the major urban centres, Tokyo, Osaka and Nagoya. By 1928 enough stations had been established to consider NHK a genuinely national network. Unlike the press and magazine industries, which had developed privately, a strong and obvious link between the state and NHK was taken as common sense, radio programming was thus to develop a consistency of outlook that was not evident in the press, as ‘the political content of radio, still in its infancy as an opinion-forming medium, was almost completely in the hands of the government’ <span class="citation" data-cites="fkz8rmFw">(High, <a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, p. 20)</span>. Writing on the importance of radio for the state in a 1939 article, Miyamoto Yoshio, a senior bureaucrat in the Ministry of Communications, makes the relationship clear describing NHK as acting as a ‘representative organ’ (<em>daikō kikan</em>) of the state <span class="citation" data-cites="15mMOodtP">(Miyamoto, <a href="#ref-15mMOodtP" role="doc-biblioref">1939</a>, p. 12)</span>.</p>
<p>First its few years, for a variety of reasons but in particular the weak state of the economy across Japan, audience growth was slow and unsure. As can be seen from <a href="#fig:licences25">1</a>, the period 1926–7 was particularly hard with hardly any increase in listenership.</p>
<div id="fig:licences25" class="fignos">
<figure>
<img src="./nat-imgs/NHK%20new%20contracts%201925.svg" alt="" /><figcaption><span>Figure 1:</span> Slow growth during early years of NHK</figcaption>
</figure>
</div>
<div id="fig:licences" class="fignos">
<figure>
<img src="./nat-imgs/dissemination+licences.svg" alt="" /><figcaption><span>Figure 2:</span> Change in number of NHK listening contracts, and total dissemination rates (right axis), 1924–45</figcaption>
</figure>
</div>
<p>The events in China from 1931 meant that for many people — especially those with family members fighting overseas — the speed of access to information that radio listening provided made a license and set essentials; while it had taken NHK over six years (83 months) to attract its first million license holders, the second million was reached in under half that time (38 months) and by the start of the 1940s it was adding a million new licences in under a year and a half.</p>
<p>NHK reached its first major audience milestone of one million licences in the middle of February 1932, somewhat earlier than than expected <span class="citation" data-cites="xhRjaAgv">NHK / Kobayashi Shichirō (<a href="#ref-xhRjaAgv" role="doc-biblioref">1933</a>, p. 70)</span>. This was against the backdrop of the the Manchurian(Mukden) Incident, as the manufactured pretext for the Japanese invasion of Manchuria, was coming to a conclusion, and the 1 March establishment of the Manchukuo puppet-regime. The <em>1933 Radio Yearbook</em> announced a number of events to mark this momentous occasion, seemed to indicate that NHK felt itself now on a sound footing with the worries about its earlier difficulties in attracting listeners in the past; just as the Russo-Japanese war of 1904–5 had driven cinema audiences<span class="citation" data-cites="fkz8rmFw">(High, <a href="#ref-fkz8rmFw" role="doc-biblioref">2003</a>, pp. 3–5)</span> the excitement around Japanese army successes in China drove radio listenership <span class="citation" data-cites="1066byZzP">(Robinson, <a href="#ref-1066byZzP" role="doc-biblioref">1998</a>, p. 365)</span>. Of the five undertakings listed, third was the construction of 50 radio towers in major cities to promote radio listening and awareness of NHK <span class="citation" data-cites="xhRjaAgv">(NHK / Kobayashi Shichirō, <a href="#ref-xhRjaAgv" role="doc-biblioref">1933</a>, p. 71)</span>.</p>
<p>The first public radio tower was erected at Tennōji in Osaka in August 1930 — perhaps with the specific intention of making available live commentary from the Kōshien high-school baseball championship. JOBK, the NHK Osaka station, took the lead in establishing radio towers and 1931 saw two more established in Nara, in Sarusawa-no-ike Park, and at Minatogawa Park in Kobe <span class="citation" data-cites="1Cj7BxyDc">(NHK / Matsuda Gi’ichiro, <a href="#ref-1Cj7BxyDc" role="doc-biblioref">1938</a>, p. 240)</span>. Tokyo’s first tower was set up in Sumida Park in September 1932; events to mark its opening included special, and rare, public performances by Yoshiwara <em>geisha</em> and musicians. The Sumida Park tower seems to have been of unusual magnificence, 5m in height and described as ‘a beautiful structure in the western style, designed by city officers to match the park surroundings’ <span class="citation" data-cites="GAlLnzEw">(“Sumida-kōen de rajio-tō”, Asahi Shimbun, <a href="#ref-GAlLnzEw" role="doc-biblioref">1932</a>, p. 11)</span>.
<!-- ∆RXIKJC --></p>
<p>Radio listening was continually affected by the progress of the national military project; events at the Marco Polo Bridge in July 1937 were followed by a few months of increased applications for licenses, and a drop as the results of the ‘incident’ percolated through to the real economy and parts for radio receivers, especially vacuum tubes, became scarcer <span class="citation" data-cites="pSkjWXtA">(Akiyama, <a href="#ref-pSkjWXtA" role="doc-biblioref">2018</a>, p. 141)</span>.</p>
<p>By the start of the Pacific War at the end of 1941 subscriber numbers were around 6.5 million<span class="citation" data-cites="RC6B0jzG">(<em>Shōwa 18-nen rajio nenkan \[1943 radio yearbook\]</em>, <a href="#ref-RC6B0jzG" role="doc-biblioref">1943</a>, p. 8)</span>. Total population of the home islands of Japan was just under 72 million, total number of households was in the region of 14 million<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Thus, while perhaps in terms of radios per 100 people, Japan lagged behind other countries, in terms of its penetration into households, it over 40 per cent. The average household in this period consisted of roughly five people so we can see that radio broadcasts <em>in the home</em>, were reaching potentially 30 million people. As previously, interest in the overseas exploits of Japan’s Navy and Army seem to have driven subscriptions to radio; between June and November of 1940 new subscriptions averaged 90–100 thousand per month. In December 1940, the month of the attack on Pearl Harbour, this number shot up to 173 thousand while the following month saw NHK gain a further 157 thousand subscribers <span class="citation" data-cites="RC6B0jzG">(<em>Shōwa 18-nen rajio nenkan \[1943 radio yearbook\]</em>, <a href="#ref-RC6B0jzG" role="doc-biblioref">1943</a>, p. 9)</span>.</p>
<p>These figures however do not necessarily reflect the reach of radio broadcasts accurately; some of the earliest adopters of radio were the new department stores, shops, cafes and restaurants for whom the radio was a tool to draw in customers. In addition to these places where a degree of commercial exchange was expected (buy a coffee, listen to the cafe’s radio for half an hour) there were other ‘public’ places — such as railways stations and schools<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> — where radio was made available, thus also putting broadcasts within the reach of those who could not purchase a receiver, and those who were unable partake in the commercially available opportunities (eg. children and the poor).</p>
<!-- ## Start of Radio and NHK
Fees and licenses - @tagiku09 -->
<h1 id="radio-and-the-nation">Radio and the Nation</h1>
<!-- Role of NHK outside producing and broadcasting programming; encouraging take-up of radio listening, certifying and categorizing receivers, training technicians (pro. and am.) -->
<p>This section looks at two important and characteristic aspects of the radio-state relationship in interwar Japan, the commemorative events arranged around the ‘year 2600’ celebrations in 1940 and, in the decade or so leading up to this high point of Japanese national feeling, the role of sport and sports broadcasting. As far as the focus of this paper, the radio tower, is concerned, the latter is particularly important.</p>
<!--
```
Policy change in 1936 - Imperial Way Faction loses reputation
19 leaders executed. Tōsei-ha predominates.
Military strengthens influence over politics…
Jul 1936: Cabinet Information Committee
"It is no longer adequate to just maintain public order by the MoHA and MoComms police powers […] We must take the initiative regarding news, actively manage it, and thereby contribute to the national interest" (Jun 19 Cabinet Resolution) @ienaga:1978[99-100]
AFTER 2.26 / 36 events
```
 Ienaga, S. (1978) The Pacific War: A Critical Perspective on Japan's Role in World War II. Pantheon Books, New York. p99-100 -->
<p>Unlike the other media mentioned here citizen’s participation in consumption requires more than just the few ‘sen’ to enter a cinema or purchase a magazine. The acquisition of a radio receiver was a major decision as receivers were far from cheap, likewise they required regular maintenance and attention.</p>
<h2 id="wave-of-popular-participation">Wave of popular participation</h2>
<p>Rhetoric of the ‘ichi-oku’ - identified the Japanese with this term emphasising the massive scale of the population, and their lack of differentiation, merely referred to as ‘the one-hundred million’. Unfortunately for this snappy phrase to make sense the population of the home islands was insufficient, being around 70 million, but luckily [after DATE?] the citizens of the newly acquired occupied territories could be included and reality could be made to coincide with rhetoric in a more convincing way.</p>
<p>Important to know that this idea only made sense if the populations of occupied areas and colonies were included.</p>
<h3 id="sec:kigen26">Events of 1940: Kigen 2600</h3>
<p>The later half of the 1930s saw little increase in the number of radio towers put in place. The rapid increase after 1938 is in part due to the perceived significance of mass participation in the events planned by the state to mark the (largely mythical) 2600th year since the founding of the Imperial line, thus Japan itself. The year marked as 1940 in the western calendar was, in the <em>kigen</em> calendar, which took the year of the mythical enthronement of Japan’s first emperor, Jimmu, 660BCE, as its start and had been used somewhat inconsistently in certain official documents since the early Meiji period, the year 2600. Seniority is important in Japanes society and this was an opportunity to mark Japan’s international status as a senior nation; whereas the western powers were merely in their 1940th year, Japan (ran the subtext) had already existed for a good six centuries longer.</p>
<p>It was well understood that radio was now an important tool of mass mobilisation the desire to have truly national and unified mass participation in the variety of events planned for 1940 meant that radio was bound to have a role.</p>
<p>What was the penetration rate in 1939? TODO</p>
<p>However there was also a feeling that Japan had as yet failed to capitalise and make best use of radio broadcasting and that increased efforts to promote radio were urgently necessary.</p>
<p>By comparison with other radio nations at the end of 1938 take-up in Japan was still relatively low; in many European countries radios were already in 10-20 per cent of homes, the US had already already passed the 20 per cent mark while to the same time the rate in Japan was still under 5 per cent <span class="citation" data-cites="Gaycw1Wa">NHK / Matsuda Gi’ichiro (<a href="#ref-Gaycw1Wa" role="doc-biblioref">1940</a>, p. 6)</span>. It was felt that more had to be done to bring radio to as great a proportion of the populace as possible.</p>
<div id="fig:penet" class="fignos">
<figure>
<img src="./nat-imgs/end1938-penetrationRatesWorldwide-nenkan1940p6-3.svg" alt="" /><figcaption><span>Figure 1:</span> Low penetration rates for radio (per person) in Japan in 1940</figcaption>
</figure>
</div>
<p>A 1939 article entitled ‘Broadcasting and the State’ penned by Miyamoto Yoshio, a senior bureaucrat in the Ministry of Communications, elucidates contemporary thinking on the relationship of broadcasting, at that point NHK, government and the Japanese people; since its inception in 1926 broadcasting in Japan, he explains, has undertaken as its mission the improvement of Japanese culture and the ‘building of national spirit’, and it has undertaken this role as a ‘representative agency of the state’ <span class="citation" data-cites="15mMOodtP">(Miyamoto, <a href="#ref-15mMOodtP" role="doc-biblioref">1939</a>, p. 12)</span>. In the article he laments that Japan was perhaps late in realising the power of broadcasting and stresses the urgency of realising the goal of ‘one household, one receiver’ (<em>ikko ichi jushinki</em>).<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> In retrospect, the scheme to set up radio towers in public places around Japan can be seen as a way to provide a temporary answer to this concern, providing public access to radio broadcasts without burdening individual households with the costs of purchasing and maintaining a receiving set.</p>
<div id="fig:hagi" class="fignos">
<figure>
<img src="nat-imgs/hagi-comp.png" style="width:50.0%" alt="" /><figcaption><span>Figure 2:</span> Radio tower in Hagi-jidō Park, Kyoto. Commemorative plaque naming contributors to its construction and giving its date as <em>kigen</em> 2601 (1941)</figcaption>
</figure>
</div>
<p><span class="citation" data-cites="Fig:hagi">(<span class="citeproc-not-found" data-reference-id="Fig:hagi"><strong>???</strong></span>)</span> shows one radio tower specifically linked to the commemorative events of <em>kigen</em> 2600; the plaque on the rear face (pictured right) lists the names of the towers’s ‘sewanin’ (organisers) and gives the date of its construction as <em>kigen</em> 2601, that is, 1941. This tower’s design is somewhat unusual in that it has a well-defined front and back and seems to ‘point’ in a certain direction. The front face still bears the worn letters JOOK, the call sign of the NHK Kyoto broadcast station, and lower down another plaque which is now unfortunately too dilapidated to be read.</p>
<p>By 1942 concerns around the use of radio for national purposes had reached a — perhaps somewhat hysterical — point where it was seen as a matter of national survival; the authors of the <em>1942 Radio Yearbook</em> write that the fall of France in the summer of 1940 was due to its failure both to prepare its airforce and <em>to make sure its radio broadcasts were used for the good of the state</em> <span class="citation" data-cites="13lUMMFet">NHK / Matsuda Gi’ichiro (<a href="#ref-13lUMMFet" role="doc-biblioref">1942</a>, p. 4)</span>. Given Japan’s concerns during this period about the ‘ABCD encirclement’ and its own national survival, it is understandable that it would be eager to learn from the perceived mistakes of countries which seemed to have failed to have survived.</p>
<h2 id="sec:taiso">Sport and Radio</h2>
<p>Just as the rapid uptake of television in Japan after WW2 was associated with the consumption of live sport, baseball and wrestling in particular, widespread radio listening was also the result of enthusiasm for sport and exercise. This section discusses the relationship between radio and baseball, and the later, and still current, link between radio and the national exercise program known as ‘rajio taisō’ (Radio Callisthenics)</p>
<p><span class="citation" data-cites="5iZBXrN3">Yamaguchi (<a href="#ref-5iZBXrN3" role="doc-biblioref">2003</a>)</span> discusses the early radio audience and baseball listening in Osaka</p>
<p>In this sense Japan was part of a worldwide movement which understood the connection between sports and the nation; the 1908 Olympics had seen athletes compete as part of national teams rather than individuals, the holding of the first Football World Cup in Uruguay, and the home team’s victory were vital in raising the nation’s image. Likewise Mussolini’s sponsorship of sports in Italy and their dominance at the World Cup of 1934, and Germany’s highly politicised hosting of the 1936 Berlin Olympic Games. In the US the media’s increasing realisation that there was money in stardom and sports coupled with the emergence of baseball as a mass spectator — and listener — sport in the late 1920s with stars like Babe Ruth.</p>
<p>see <span class="citation" data-cites="tTq4N0o9">Sakaue (<a href="#ref-tTq4N0o9" role="doc-biblioref">2014</a>)</span></p>
<p>Re 1932 LA Olympics —</p>
<blockquote>
<p>Despite the U.S. government’s hands-off stance, other countries injected the Olympics with political significance, perhaps none more so than Japan. Intent on making a strong showing at the ’32 Games, Japan sent the largest foreign team, at nearly 130 athletes.57 The effort was part of a drive by the Japanese government to increase the country’s international standing through victories in international sports <span class="citation" data-cites="119HlqFVn">(Keys, <a href="#ref-119HlqFVn" role="doc-biblioref">2004</a>, p. 177)</span></p>
</blockquote>
<blockquote>
<p>Media broadcasts of the Olympics on all traditional platforms have been framed in nationalistic terms producing the ‘communitas’ that Whannel has indicated as a powerful force in shaping their broadcast and sponsorship in the latter half of the 20th century. The first CCTV coverage of a sporting event occurred with the 1936 Berlin Olympics, where 72 hours of footage was transmitted to special television viewing booths in Germany. A short-wave radio system also transmitted accounts of the Games to 40 countries (Barney et al., 2002). <span class="citation" data-cites="fq22YAzz">Marshall, Walker, &amp; Russo (<a href="#ref-fq22YAzz" role="doc-biblioref">2010</a>, p. 266)</span></p>
</blockquote>
<p>see <span class="citation" data-cites="119HlqFVn">Keys (<a href="#ref-119HlqFVn" role="doc-biblioref">2004</a>)</span> too - to read</p>
<p>Also <span class="citation" data-cites="xhRjaAgv">NHK / Kobayashi Shichirō (<a href="#ref-xhRjaAgv" role="doc-biblioref">1933</a>, pp. 46–55)</span></p>
<p>Now twice per morning, 6.30 and 7am broadcasts from March 1 1933 <span class="citation" data-cites="xhRjaAgv">NHK / Kobayashi Shichirō (<a href="#ref-xhRjaAgv" role="doc-biblioref">1933</a>, p. 62)</span>, moved to 6am in April</p>
<p>Also <span class="citation" data-cites="16YYBgPfs">Abe, Kiyohara, &amp; Nakajima (<a href="#ref-16YYBgPfs" role="doc-biblioref">1992</a>, p. 9)</span></p>
<blockquote>
<p>Above all baseball came into vogue. One of the oldest university baseball games, Waseda versus Keio, which still exists, started in November 1903. Waseda University sent their team to Stanford University in America in 1905. Waseda, Keio and Meiji Universities founded their biannual baseball league-match in 1914, which became, in 1925, the Base- ball League of Six Universities in Tokyo, consisting of Waseda, Keio, Meiji, Rikkyo, Hdsei and Tokyo Imperial Universities. Another annual baseball championship, the National Middle Schools’ Baseball Championships, began in 1915.
[…]
Most sports organized their own national championships between the 1920s and 1930s. Mass communication assisted this trend. <em>Osaka Mainichi</em> newspaper sponsored the creation of Japan’s Olympic Games in 1913, though it did not last long. <em>Asahi</em> newspaper also sponsored the National Middle Schools’ Baseball Championships. <em>Nippon Hoso Kyokai</em> (NHK, Japan Broadcasting Corporation) started a radio broadcast of the National Middle Schools’ Baseball Championships in 1927</p>
</blockquote>
<p>, and , likewise the 1936 heavyweight boxing clash between Joe Louis and Max Schmeling was perceived by many as a clash of worldviews as well as a clash of individual sportsmen, both athletes were later used by their respective nations in wartime propaganda.</p>
<p>State as body; people are cells, healthy cells -&gt; healthy body.</p>
<p>Radio callisthenics; this now characteristically Japanese program of national exercise was conceived as one event amongst many which marked the various ceremonies around the accession of Emperor Hirohito in the autumn of 1928. First broadcast in the spring of 1929, as part of the celebration of that year’s National Foundation Day (<em>Kigensetsu</em>) on 11 February. The simple and no over strenuous exercises proved popular with radio listeners and by the time of the LA Olympics in 1932, participation in the annual summer “Radio Callisthenics Meet”, according to NHK’s figures was close to 26 million people, about a third of the population of Japan’s home islands at the time. <span class="citation" data-cites="xhRjaAgv">NHK / Kobayashi Shichirō (<a href="#ref-xhRjaAgv" role="doc-biblioref">1933</a>, pp. 56–9)</span></p>
<p>Other movements around the world: Sokol, later Nazi Germany</p>
<p>Training the body thus a contribution to the health of the state; could be symbolic (participation symbolising the individuals wish for the success of national policy) or potentially real (healthy adults would make better workers and soldiers)</p>
<p>Also mention growth in interest in nutrition - IGIN had its own regular radio spot - <span class="citation" data-cites="GyF1ibbQ">Hopson (<a href="#ref-GyF1ibbQ" role="doc-biblioref">2019</a>, p. 22)</span> - and produced a popular song promoting healthy eating</p>
<h2 id="radio-towers">Radio Towers</h2>
<p>Started in Kansai - baseball Kōshien tournament</p>
<div id="tbl:increase" class="tablenos">
<table>
<caption><span>Table 1:</span> Increase in number of radio towers listed in NHK Yearbook, column headings indicate yearbook year. </caption>
<thead>
<tr class="header">
<th style="text-align: left;">Area</th>
<th style="text-align: right;">1940</th>
<th style="text-align: right;">1941</th>
<th style="text-align: right;">1942</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Tokyo</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="even">
<td style="text-align: left;">Osaka</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nagoya</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hiroshima</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kumamoto</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sendai</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sapporo</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOTAL</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">269</td>
<td style="text-align: right;">412</td>
</tr>
</tbody>
</table>
</div>
<!-- 1paxNGi33etwphkg-QMbudDNp9hOFDe-RXRu6z018WZU -->
<p>Story of radio towers in confined largely to the decade between 1932 and 1942. The origins of the radio towers go back somewhat earlier, and the effective end of the radio tower is more or less lost in the fog of war.</p>
<p>Known documentation is scarce and highly fragmented.</p>
<p><em>Kōshū-yō rajio chōshu shisetsu</em>, mentioned on p106 of the 1932 Radio Yearbook, following on from a section describing the uptake and previous years events in ‘rajio taisō’.</p>
<p>In general, based on the evidence of the remaining examples, radio towers can very roughly be divided into two general types design-wise; traditional and modern. The traditional type can often be very similar to a the (kaku-bozen-gata)<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> <em>tōrō</em> lanterns commonly seen around temple grounds and graveyards. Radio towers often share the square ground plan and the same five-fold structure (see <a href="#fig:toro">3</a>)</p>
<div id="fig:toro" class="fignos">
<figure>
<img src="./toro.png" style="width:50.0%" alt="" /><figcaption><span>Figure 3:</span> Five-fold structure of toro/traditional radio tower</figcaption>
</figure>
</div>
<p>The ‘modern’ type is rather more diverse design-wise but often echoes the Art Deco modernistic trends of the 1930s. There are also some radio towers that do not fit neatly into either of these categories, but they are relatively few. It seems as though the traditional type has survived better than the modern, <span class="citation" data-cites="YTXH1zcc">Ichiman (<a href="#ref-YTXH1zcc" role="doc-biblioref">2017</a>, p. 61)</span> suggests this may be because of their resemblance to the <em>tōrō</em> lanterns found around temples, and perhaps the assumption that they have some kind of religious association and are thus best treated with respect or at least left alone.</p>
<h1 id="discussion">Discussion</h1>
<p>During the 1930s radio increasingly permeated a variety of public and private spaces; penetration of radio sets into private homes increased from NN to NN in the years XXXX–XXXX. Radio shops allowed passers-by to pause or gather to listen to broadcasts, radios in cafes and restaurants became a common background to consumption, and the number of radio towers increased meaning that radio broadcasts were also available to people gathering in parks and other public spaces to relax or exercise.</p>
<h1 id="summary-and-conclusions">Summary and Conclusions</h1>
<h2 class="page_break_before" id="references">References</h2>
<!-- Explicitly insert bibliography here -->
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-16YYBgPfs">
<p>Abe, I., Kiyohara, Y., &amp; Nakajima, K. (1992). Fascism, sport and society in japan. <em>The International Journal of the History of Sport</em>, <em>9</em>(1), 1–28. <a href="https://doi.org/10.1080/09523369208713777">https://doi.org/10.1080/09523369208713777</a></p>
</div>
<div id="ref-pSkjWXtA">
<p>Akiyama, H. (2018). <em>Kimi wa gyokuon hōsō wo kiita ka? Rajio to sensō \[did you hear the empereor’s speech? Radio and war\]</em>. Tokyo: Junpōsha.</p>
</div>
<div id="ref-16rXryAuj">
<p>Anderson, J. L., &amp; Richie, D. (1982). <em>The japanese film: Art and industry</em>. ??? Princeton University Press.</p>
</div>
<div id="ref-GAlLnzEw">
<p>Asahi Shimbun. (1932). Sumida koen ni rajio-tō. <em>Sumida Koen Ni Rajio-Tō</em>, 11.</p>
</div>
<div id="ref-fkz8rmFw">
<p>High, P. B. (2003). <em>The imperial screen: Japanese film culture in the fifteen years’ war, 1931-1945</em>. University of Wisconsin Press.</p>
</div>
<div id="ref-GyF1ibbQ">
<p>Hopson, N. (2019). Nutrition as national defense: Japan’s imperial government institute for nutrition, 1920–1940. <em>The Journal of Japanese Studies</em>, <em>45</em>(1), 1–29.</p>
</div>
<div id="ref-YTXH1zcc">
<p>Ichiman, K. (2017). <em>Rajio-tō daihyakka 2017 \[radio tower encylopedia 2017\]</em>. Okayama: Takanome tokushu butai.</p>
</div>
<div id="ref-g8M5rrOK">
<p>Kasza, G. J. (1988). <em>The state and the mass media in Japan, 1918-1945</em>. Berkeley CA: University of California Press.</p>
</div>
<div id="ref-119HlqFVn">
<p>Keys, B. (2004). Spreading peace, democracy, and coca-cola®: Sport and american cultural expansion in the 1930s. <em>Diplomatic History</em>, <em>28</em>(2), 165–196.</p>
</div>
<div id="ref-alZ6afOh">
<p>Makino, M. (2000). 内務省令「活動写真『フィルム』検閲規則」の制定における立法の思想と背景 (特集 メディア史のなかの映画). <em>Media History</em>, <em>10</em>, 16–36. Retrieved from <a href="https://ci.nii.ac.jp/naid/40005053416/en/">https://ci.nii.ac.jp/naid/40005053416/en/</a></p>
</div>
<div id="ref-fq22YAzz">
<p>Marshall, P. D., Walker, B., &amp; Russo, N. (2010). Mediating the olympics. <em>Convergence</em>, <em>16</em>(3), 263–278.</p>
</div>
<div id="ref-15mMOodtP">
<p>Miyamoto, Y. (1939). Kokka to hōsō \[The State and Broadcasting\]. <em>Hōsō</em>. Retrieved from <a href="Japan%20Center%20for%20Asian%20Historical%20Records:%20https://www.jacar.archives.go.jp/">Japan Center for Asian Historical Records: https://www.jacar.archives.go.jp/</a></p>
</div>
<div id="ref-128OX7hD2">
<p>NHK (Ed.). (2001). <em>20seiki hōsō-shi \[history of broadcasting in the twentieth century\]</em> (Vol. 1). NHK Shuppan.</p>
</div>
<div id="ref-WICO0eWk">
<p>NHK / Kobayashi Shichirō (Ed.). (1932). <em>Shōwa 6-nen rajio nenkan \[1932 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-xhRjaAgv">
<p>NHK / Kobayashi Shichirō (Ed.). (1933). <em>Shōwa 7-nen rajio nenkan \[1933 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-RDKr7gbL">
<p>NHK / Kobayashi Shichirō (Ed.). (1935). <em>Shōwa 10-nen rajio nenkan \[1935 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-eTcyG1Ky">
<p>NHK / Kobayashi Shichirō (Ed.). (1937). <em>Shōwa 12-nen rajio nenkan \[1937 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-1Cj7BxyDc">
<p>NHK / Matsuda Gi’ichiro (Ed.). (1938). <em>Shōwa 13-nen rajio nenkan \[1938 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-Gaycw1Wa">
<p>NHK / Matsuda Gi’ichiro (Ed.). (1940). <em>Shōwa 15-nen rajio nenkan \[1940 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-13lUMMFet">
<p>NHK / Matsuda Gi’ichiro (Ed.). (1942). <em>Shōwa 17-nen rajio nenkan \[1942 radio yearbook\]</em>. Tokyo: NHK.</p>
</div>
<div id="ref-1066byZzP">
<p>Robinson, M. E. (1998). Broadcasting in korea, 1924–1937: Colonial modernity and cultural hegemony. In S. Minichiello (Ed.), <em>Japan’s competing modernities: Issues in culture and democracy, 1900-1930</em>. University of Hawaii Press.</p>
</div>
<div id="ref-tTq4N0o9">
<p>Sakaue, Y. (2014). <em>Supōtsu to seiji</em>. Tokyo: Yamakawa Shuppan-sha.</p>
</div>
<div id="ref-PahDbwPO">
<p>Schäfer, F. (2012). <em>Public opinion–propaganda–ideology: Theories on the press and its social function in interwar japan, 1918-1937</em> (Vol. 39). Leiden; Boston: Brill.</p>
</div>
<div id="ref-RC6B0jzG">
<p><em>Shōwa 18-nen rajio nenkan \[1943 radio yearbook\]</em>. (1943). Tokyo: NHK.</p>
</div>
<div id="ref-5iZBXrN3">
<p>Yamaguchi, M. (2003). The practices of ’listening’ in the history of early broadcasting and its contribution to the creation of radio. <em>Journal of Mass Communication Studies</em>, (63), 144–161.</p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>For speakers of Japanese, the term used to refer to these objects is ‘rajio-tō’, however, confusingly, this may also be used to refer top the large metal towers used to mount broadcasting antennas, also referred to as ‘tettō’ (steel towers).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>https://www.theguardian.com/media/organgrinder/2009/aug/21/death-of-newspapers-1910<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>Source: <a href="https://www.e-stat.go.jp/stat-search/files?page=1&amp;toukei=00200521&amp;tstat=000001036871">1940 National Census</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>In 1937 over half of Japan’s primary 25,771 schools had a radio; the highest proportion was in the Tokyo region where 65 percent of schools had a radio, the lowest Sapporo at just under 40 percent. <span class="citation" data-cites="1Cj7BxyDc">NHK / Matsuda Gi’ichiro (<a href="#ref-1Cj7BxyDc" role="doc-biblioref">1938</a>, p. 218)</span><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>NHK’s three-month campaign to encourage households to each buy a radio took place starting in December 1938 <span class="citation" data-cites="pSkjWXtA">(Akiyama, <a href="#ref-pSkjWXtA" role="doc-biblioref">2018</a>, p. 141)</span><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>角墓前型<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!-- default theme -->

<style>
    /* import google fonts */
    @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
    @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

    /* -------------------------------------------------- */
    /* global */
    /* -------------------------------------------------- */

    /* all elements */
    * {
        /* force sans-serif font unless specified otherwise */
        font-family: "Open Sans", "Helvetica", sans-serif;

        /* prevent text inflation on some mobile browsers */
        -webkit-text-size-adjust: none !important;
        -moz-text-size-adjust: none !important;
        -o-text-size-adjust: none !important;
        text-size-adjust: none !important;
    }

    @media only screen {
        /* "page" element */
        body {
            position: relative;
            box-sizing: border-box;
            font-size: 12pt;
            line-height: 1.5;
            max-width: 8.5in;
            margin: 20px auto;
            padding: 40px;
            border-radius: 5px;
            border: solid 1px #bdbdbd;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            background: #ffffff;
        }
    }

    /* when on screen < 8.5in wide */
    @media only screen and (max-width: 8.5in) {
        /* "page" element */
        body {
            padding: 20px;
            margin: 0;
            border-radius: 0;
            border: none;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
            background: none;
        }
    }

    /* -------------------------------------------------- */
    /* headings */
    /* -------------------------------------------------- */

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 20px 0;
        padding: 0;
        font-weight: bold;
    }

    /* biggest heading */
    h1 {
        margin: 40px 0;
        text-align: center;
    }

    /* second biggest heading */
    h2 {
        margin-top: 30px;
        padding-bottom: 5px;
        border-bottom: solid 1px #bdbdbd;
    }

    /* heading font sizes */
    h1 {
        font-size: 2em;
    }
    h2 {
        font-size: 1.5em;
    }
    h3{
        font-size: 1.35em;
    }
    h4 {
        font-size: 1.25em;
    }
    h5 {
        font-size: 1.15em;
    }
    h6 {
        font-size: 1em;
    }

    /* -------------------------------------------------- */
    /* manuscript header */
    /* -------------------------------------------------- */

    /* manuscript title */
    header > h1 {
        margin: 0;
    }

    /* manuscript title caption text (ie "automatically generated on") */
    header + p {
        text-align: center;
        margin-top: 10px;
    }

    /* -------------------------------------------------- */
    /* text elements */
    /* -------------------------------------------------- */

    /* links */
    a {
        color: #2196f3;
        overflow-wrap: break-word;
    }

    /* normal links (not empty, not button link, not syntax highlighting link) */
    a:not(:empty):not(.button):not(.sourceLine) {
        padding-left: 1px;
        padding-right: 1px;
    }

    /* superscripts and subscripts */
    sub,
    sup {
        /* prevent from affecting line height */
        line-height: 0;
    }

    /* unordered and ordered lists*/
    ul,
    ol {
        padding-left: 20px;
    }

    /* class for styling text semibold */
    .semibold {
        font-weight: 600;
    }

    /* class for styling elements horizontally left aligned */
    .left {
        display: block;
        text-align: left;
        margin-left: auto;
        margin-right: 0;
        justify-content: left;
    }

    /* class for styling elements horizontally centered */
    .center {
        display: block;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        justify-content: center;
    }

    /* class for styling elements horizontally right aligned */
    .right {
        display: block;
        text-align: right;
        margin-left: 0;
        margin-right: auto;
        justify-content: right;
    }

    /* -------------------------------------------------- */
    /* section elements */
    /* -------------------------------------------------- */

    /* horizontal divider line */
    hr {
        border: none;
        height: 1px;
        background: #bdbdbd;
    }

    /* paragraphs, horizontal dividers, figures, tables, code */
    p,
    hr,
    figure,
    table,
    pre {
        /* treat all as "paragraphs", with consistent vertical margins */
        margin-top: 20px;
        margin-bottom: 20px;
    }

    /* -------------------------------------------------- */
    /* figures */
    /* -------------------------------------------------- */

    /* figure */
    figure {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    /* figure caption */
    figcaption {
        padding: 0;
        padding-top: 10px;
    }

    /* figure image element */
    figure img {
        max-width: 100%;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }

    /* figure auto-number */
    img + figcaption > span:first-of-type {
        font-weight: bold;
        margin-right: 5px;
    }

    /* -------------------------------------------------- */
    /* tables */
    /* -------------------------------------------------- */

    /* table */
    table {
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    /* table cells */
    th,
    td {
        border: solid 1px #bdbdbd;
        padding: 10px;
        /* squash table if too wide for page by forcing line breaks */
        overflow-wrap: break-word;
        word-break: break-word;
    }

    /* header row and even rows */
    th,
    tr:nth-child(2n) {
        background-color: #fafafa;
    }

    /* odd rows */
    tr:nth-child(2n + 1) {
        background-color: #ffffff;
    }

    /* table caption */
    caption {
        text-align: left;
        padding: 0;
        padding-bottom: 10px;
    }

    /* table auto-number */
    table > caption > span:first-of-type,
    div.table_wrapper > table > caption > span:first-of-type {
        font-weight: bold;
        margin-right: 5px;
    }

    /* -------------------------------------------------- */
    /* code */
    /* -------------------------------------------------- */

    /* multi-line code block */
    pre {
        padding: 10px;
        background-color: #eeeeee;
        color: #000000;
        border-radius: 5px;
        break-inside: avoid;
        text-align: left;
    }

    /* inline code, ie code within normal text */
    :not(pre) > code {
        padding: 0 4px;
        background-color: #eeeeee;
        color: #000000;
        border-radius: 5px;
    }

    /* code text */
    /* apply all children, to reach syntax highlighting sub-elements */
    code,
    code * {
        /* force monospace font */
        font-family: "Source Code Pro", "Courier New", monospace;
    }

    /* -------------------------------------------------- */
    /* quotes */
    /* -------------------------------------------------- */

    /* quoted text */
    blockquote {
        margin: 0;
        padding: 0;
        border-left: 4px solid #bdbdbd;
        padding-left: 16px;
        break-inside: avoid;
    }

    /* -------------------------------------------------- */
    /* banners */
    /* -------------------------------------------------- */

    /* info banners */
    .banner {
        box-sizing: border-box;
        display: block;
        position: relative;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 20px;
        padding: 20px;
        text-align: center;
    }

    /* paragraph in banner */
    .banner > p {
        margin: 0;
    }

    /* -------------------------------------------------- */
    /* highlight colors */
    /* -------------------------------------------------- */

    .white {
        background: #ffffff;
    }
    .lightgrey {
        background: #eeeeee;
    }
    .grey {
        background: #757575;
    }
    .darkgrey {
        background: #424242;
    }
    .black {
        background: #000000;
    }
    .lightred {
        background: #ffcdd2;
    }
    .lightyellow {
        background: #ffecb3;
    }
    .lightgreen {
        background: #dcedc8;
    }
    .lightblue {
        background: #e3f2fd;
    }
    .lightpurple {
        background: #f3e5f5;
    }
    .red {
        background: #f44336;
    }
    .orange {
        background: #ff9800;
    }
    .yellow {
        background: #ffeb3b;
    }
    .green {
        background: #4caf50;
    }
    .blue {
        background: #2196f3;
    }
    .purple {
        background: #9c27b0;
    }
    .white,
    .lightgrey,
    .lightred,
    .lightyellow,
    .lightgreen,
    .lightblue,
    .lightpurple,
    .orange,
    .yellow,
    .white a,
    .lightgrey a,
    .lightred a,
    .lightyellow a,
    .lightgreen a,
    .lightblue a,
    .lightpurple a,
    .orange a,
    .yellow a {
        color: #000000;
    }
    .grey,
    .darkgrey,
    .black,
    .red,
    .green,
    .blue,
    .purple,
    .grey a,
    .darkgrey a,
    .black a,
    .red a,
    .green a,
    .blue a,
    .purple a {
        color: #ffffff;
    }

    /* -------------------------------------------------- */
    /* buttons */
    /* -------------------------------------------------- */

    /* class for styling links like buttons */
    .button {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        margin: 5px;
        padding: 10px 20px;
        font-size: 0.75em;
        font-weight: 600;
        text-transform: uppercase;
        text-decoration: none;
        letter-spacing: 1px;
        background: none;
        color: #2196f3;
        border: solid 1px #bdbdbd;
        border-radius: 5px;
    }

    /* buttons when hovered */
    .button:hover:not([disabled]),
    .icon_button:hover:not([disabled]) {
        cursor: pointer;
        background: #f5f5f5;
    }

    /* buttons when disabled */
    .button[disabled],
    .icon_button[disabled] {
        opacity: 0.35;
        pointer-events: none;
    }

    /* class for styling buttons containg only single icon */
    .icon_button {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        margin: 0;
        padding: 0;
        background: none;
        border-radius: 5px;
        border: none;
        width: 20px;
        height: 20px;
        min-width: 20px;
        min-height: 20px;
    }

    /* icon button inner svg image */
    .icon_button > svg {
        height: 16px;
    }

    /* -------------------------------------------------- */
    /* icons */
    /* -------------------------------------------------- */

    /* class for styling icons inline with text */
    .inline_icon {
        height: 1em;
        position: relative;
        top: 0.125em;
    }

    /* -------------------------------------------------- */
    /* print control */
    /* -------------------------------------------------- */

    @media print {
        @page {
            /* suggested printing margin */
            margin: 0.5in;
        }

        /* document and "page" elements */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        /* "page" element */
        body {
            font-size: 11pt !important;
            line-height: 1.35;
        }

        /* all headings */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 15px 0;
        }

        /* figures and tables */
        figure, table {
            font-size: 0.85em;
        }

        /* table cells */
        th,
        td {
            padding: 5px;
        }

        /* shrink font awesome icons */
        i.fas,
        i.fab,
        i.far,
        i.fal {
            transform: scale(0.85);
        }

        /* decrease banner margins */
        .banner {
            margin-top: 15px;
            margin-bottom: 15px;
            padding: 15px;
        }

        /* class for centering an element vertically on its own page */
        .page_center {
            margin: auto;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            vertical-align: middle;
            break-before: page;
            break-after: page;
        }

        /* always insert a page break before the element */
        .page_break_before {
            break-before: page;
        }

        /* always insert a page break after the element */
        .page_break_after {
            break-after: page;
        }

        /* avoid page break before the element */
        .page_break_before_avoid {
            break-before: avoid;
        }

        /* avoid page break after the element */
        .page_break_after_avoid {
            break-after: avoid;
        }

        /* avoid page break inside the element */
        .page_break_inside_avoid {
            break-inside: avoid;
        }
    }

    /* -------------------------------------------------- */
    /* override pandoc css quirks */
    /* -------------------------------------------------- */

    .sourceCode {
        /* prevent unsightly overflow in wide code blocks */
        overflow: auto !important;
    }

    div.sourceCode {
        /* prevent background fill on top-most code block  container */
        background: none !important;
    }

    .sourceCode * {
        /* force consistent line spacing */
        line-height: 1.5 !important;
    }

    div.sourceCode {
        /* style code block margins same as <pre> element */
        margin-top: 20px;
        margin-bottom: 20px;
    }

    /* -------------------------------------------------- */
    /* tablenos */
    /* -------------------------------------------------- */

    /* tablenos wrapper */
    .tablenos {
        /* show scrollbar on tables if necessary to prevent overflow */
        width: 100%;
        margin: 20px 0;
    }

    .tablenos > table {
        /* move margins from table to table_wrapper to allow margin collapsing */
        margin: 0;
    }

    @media only screen {
        /* tablenos wrapper */
        .tablenos {
            /* show scrollbar on tables if necessary to prevent overflow */
            overflow-x: auto !important;
        }

        .tablenos th,
        .tablenos td {
            overflow-wrap: unset !important;
            word-break: unset !important;
        }

        /* table in wrapper */
        .tablenos table,
        .tablenos table * {
            /* don't break table words */
            overflow-wrap: normal !important;
        }
    }

    /* -------------------------------------------------- */
    /* mathjax */
    /* -------------------------------------------------- */

    /* mathjax containers */
    .math.display > span:not(.MathJax_Preview) {
        /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
        display: flex !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        justify-content: center;
        align-items: center;
        margin: 0 !important;
    }

    /* right click menu */
    .MathJax_Menu {
        border-radius: 5px !important;
        border: solid 1px #bdbdbd !important;
        box-shadow: none !important;
    }

    /* equation auto-number */
    span[id^="eq:"] > span.math.display + span {
        font-weight: 600;
    }

    /* equation */
    span[id^="eq:"] > span.math.display > span {
        /* nudge to make room for equation auto-number and anchor */
        margin-right: 60px !important;
    }

    /* -------------------------------------------------- */
    /* anchors plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* anchor button */
        .anchor {
            opacity: 0;
            margin-left: 5px;
        }

        /* anchor buttons within <h2>'s */
        h2 .anchor {
            margin-left: 10px;
        }

        /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
        *:hover > .anchor,
        .anchor:hover,
        .anchor:focus {
            opacity: 1;
        }

        /* anchor button when hovered */
        .anchor:hover {
            cursor: pointer;
        }
    }

    /* always show anchor button on devices with no mouse/hover ability */
    @media (hover: none) {
        .anchor {
            opacity: 1;
        }
    }

    /* always hide anchor button on print */
    @media only print {
        .anchor {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* accordion plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* accordion arrow button */
        .accordion_arrow {
            margin-right: 10px;
        }

        /* arrow icon when <h2> data-collapsed attribute true */
        h2[data-collapsed="true"] > .accordion_arrow > svg {
            transform: rotate(-90deg);
        }

        /* all elements (except <h2>'s) when data-collapsed attribute true */
        *:not(h2)[data-collapsed="true"] {
            display: none;
        }

        /* accordion arrow button when hovered and <h2>'s when hovered */
        .accordion_arrow:hover,
        h2[data-collapsed="true"]:hover,
        h2[data-collapsed="false"]:hover {
            cursor: pointer;
        }
    }

    /* always hide accordion arrow button on print */
    @media only print {
        .accordion_arrow {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* tooltips plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* tooltip container */
        #tooltip {
            position: absolute;
            width: 50%;
            min-width: 240px;
            max-width: 75%;
            z-index: 1;
        }

        /* tooltip content */
        #tooltip_content {
            margin-bottom: 5px;
            padding: 20px;
            border-radius: 5px;
            border: solid 1px #bdbdbd;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            background: #ffffff;
            overflow-wrap: break-word;
        }

        /* tooltip copy of paragraphs and figures */
        #tooltip_content > p,
        #tooltip_content > figure {
            margin: 0;
            max-height: 320px;
            overflow-y: auto;
        }

        /* tooltip copy of <img> */
        #tooltip_content > figure > img {
            max-height: 260px;
        }

        /* navigation bar */
        #tooltip_nav_bar {
            margin-top: 10px;
            text-align: center;
        }

        /* navigation bar previous/next buton */
        #tooltip_nav_bar > .icon_button {
            position: relative;
            top: 3px;
        }

        /* navigation bar previous button */
        #tooltip_nav_bar > .icon_button:first-of-type {
            margin-right: 5px;
        }

        /* navigation bar next button */
        #tooltip_nav_bar > .icon_button:last-of-type {
            margin-left: 5px;
        }
    }

    /* always hide tooltip on print */
    @media only print {
        #tooltip {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* jump to first plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* jump button */
        .jump_arrow {
            position: relative;
            top: 0.125em;
            margin-right: 5px;
        }
    }

    /* always hide jump button on print */
    @media only print {
        .jump_arrow {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* link highlight plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* anything with data-highlighted attribute true */
        [data-highlighted="true"] {
            background: #ffeb3b;
        }

        /* anything with data-selected attribute true */
        [data-selected="true"] {
            background: #ff8a65 !important;
        }

        /* animation definition for glow */
        @keyframes highlight_glow {
            0% {
                background: none;
            }
            10% {
                background: #bbdefb;
            }
            100% {
                background: none;
            }
        }

        /* anything with data-glow attribute true */
        [data-glow="true"] {
            animation: highlight_glow 2s;
        }
    }

    /* -------------------------------------------------- */
    /* table of contents plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* toc panel */
        #toc_panel {
            box-sizing: border-box;
            position: fixed;
            top: 0;
            left: 0;
            background: #ffffff;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            z-index: 2;
        }

        /* toc panel when closed */
        #toc_panel[data-open="false"] {
            min-width: 60px;
            width: 60px;
            height: 60px;
            border-right: solid 1px #bdbdbd;
            border-bottom: solid 1px #bdbdbd;
        }

        /* toc panel when open */
        #toc_panel[data-open="true"] {
            min-width: 260px;
            max-width: 480px;
            /* keep panel edge consistent distance away from "page" edge */
            width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
            bottom: 0;
            border-right: solid 1px #bdbdbd;
        }

        /* toc panel header */
        #toc_header {
            box-sizing: border-box;
            display: flex;
            flex-direction: row;
            align-items: center;
            height: 60px;
            margin: 0;
            padding: 20px;
        }

        /* toc panel header when hovered */
        #toc_header:hover {
            cursor: pointer;
        }

        /* toc panel header when panel open */
        #toc_panel[data-open="true"] > #toc_header {
            border-bottom: solid 1px #bdbdbd;
        }

        /* toc open/close header button */
        #toc_button {
            margin-right: 20px;
        }

        /* hide toc list and header text when closed */
        #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
        #toc_panel[data-open="false"] > #toc_list {
            display: none;
        }

        /* toc list of entries */
        #toc_list {
            box-sizing: border-box;
            width: 100%;
            padding: 20px;
            position: absolute;
            top: calc(60px + 1px);
            bottom: 0;
            overflow: auto;
        }

        /* toc entry, link to section in document */
        .toc_link {
            display: block;
            padding: 5px;
            position: relative;
            font-weight: 600;
            text-decoration: none;
        }

        /* toc entry when hovered or when "viewed" */
        .toc_link:hover,
        .toc_link[data-viewing="true"] {
            background: #f5f5f5;
        }

        /* toc entry, level 1 indentation */
        .toc_link[data-level="1"] {
            margin-left: 0;
        }

        /* toc entry, level 2 indentation */
        .toc_link[data-level="2"] {
            margin-left: 20px;
        }

        /* toc entry, level 3 indentation */
        .toc_link[data-level="3"] {
            margin-left: 40px;
        }

        /* toc entry, level 4 indentation */
        .toc_link[data-level="4"] {
            margin-left: 60px;
        }

        /* toc entry bullets */
        #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
            position: absolute;
            left: -15px;
            top: -1px;
            font-size: 1.5em;
        }

        /* toc entry, level 2 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
            content: "\2022";
        }

        /* toc entry, level 3 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
            content: "\25AB";
        }

        /* toc entry, level 4 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
            content: "-";
        }
    }

    /* when on screen < 8.5in wide */
    @media only screen and (max-width: 8.5in) {
        /* push <body> ("page") element down to make room for toc icon */
        .toc_body_nudge {
            padding-top: 60px;
        }

        /* toc icon when panel closed and not hovered */
        #toc_panel[data-open="false"]:not(:hover) {
            background: rgba(255, 255, 255, 0.75);
        }
    }

    /* always hide toc panel on print */
    @media only print {
        #toc_panel {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* lightbox plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* regular <img> in document when hovered */
        .lightbox_document_img:hover {
            cursor: pointer;
        }

        .body_no_scroll {
            overflow: hidden !important;
        }

        /* screen overlay */
        #lightbox_overlay {
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 3;
        }

        /* middle area containing lightbox image */
        #lightbox_image_container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            padding: 20px;
        }

        /* bottom area containing caption */
        #lightbox_bottom_container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            min-height: 100px;
            max-height: 100px;
            background: rgba(0, 0, 0, 0.5);
        }

        /* image number info text box */
        #lightbox_number_info {
            position: absolute;
            color: #ffffff;
            font-weight: 600;
            left: 2px;
            top: 0;
            z-index: 4;
        }

        /* zoom info text box */
        #lightbox_zoom_info {
            position: absolute;
            color: #ffffff;
            font-weight: 600;
            right: 2px;
            top: 0;
            z-index: 4;
        }

        /* copy of image caption */
        #lightbox_caption {
            box-sizing: border-box;
            display: inline-block;
            width: 100%;
            max-height: 100%;
            padding: 10px 0;
            text-align: center;
            overflow-y: auto;
            color: #ffffff;
        }

        /* navigation previous/next button */
        .lightbox_button {
            width: 100px;
            height: 100%;
            min-width: 100px;
            min-height: 100%;
            color: #ffffff;
        }

        /* navigation previous/next button when hovered */
        .lightbox_button:hover {
            background: none !important;
        }

        /* navigation button icon */
        .lightbox_button > svg {
            height: 25px;
        }

        /* figure auto-number */
        #lightbox_caption > span:first-of-type {
            font-weight: bold;
            margin-right: 5px;
        }

        /* lightbox image when hovered */
        #lightbox_img:hover {
            cursor: grab;
        }

        /* lightbox image when grabbed */
        #lightbox_img:active {
            cursor: grabbing;
        }
    }

    /* when on screen < 480px wide */
    @media only screen and (max-width: 480px) {
        /* make navigation buttons skinnier on small screens to make more room for caption text */
        .lightbox_button {
            width: 50px;
            min-width: 50px;
        }
    }

    /* always hide lightbox on print */
    @media only print {
        #lightbox_overlay {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* hypothesis (annotations) plugin */
    /* -------------------------------------------------- */

    /* hypothesis activation button */
    #hypothesis_button {
        box-sizing: border-box;
        position: fixed;
        top: 0;
        right: 0;
        width: 60px;
        height: 60px;
        background: #ffffff;
        border-radius: 0;
        border-left: solid 1px #bdbdbd;
        border-bottom: solid 1px #bdbdbd;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
        z-index: 2;
    }

    /* hypothesis button svg */
    #hypothesis_button > svg {
        position: relative;
        top: -4px;
    }

    /* hypothesis annotation count */
    #hypothesis_count {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 5px;
    }

    /* side panel */
    .annotator-frame {
        width: 280px !important;
    }

    /* match highlight color to rest of theme */
    .annotator-highlights-always-on .annotator-hl {
        background-color: #ffeb3b !important;
    }

    /* match focused color to rest of theme */
    .annotator-hl.annotator-hl-focused {
        background-color: #ff8a65 !important;
    }

    /* match bucket bar color to rest of theme */
    .annotator-bucket-bar {
        background: #f5f5f5 !important;
    }

    /* always hide button, toolbar, and tooltip on print */
    @media only print {
        #hypothesis_button {
            display: none;
        }

        .annotator-frame {
            display: none !important;
        }

        hypothesis-adder {
            display: none !important;
        }
    }
</style>
<!-- anchors plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin adds an anchor next to each of a certain type
        // of element that provides a human-readable url to that specific
        // item/position in the document (eg "manuscript.html#abstract"). It
        // also makes it such that scrolling out of view of a target removes
        // its identifier from the url.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'anchors';

        // default plugin options
        const options = {
            // which types of elements to add anchors next to, in
            // "document.querySelector" format
            typesQuery: 'h1, h2, h3, [id^="fig:"], [id^="tbl:"], [id^="eq:"]',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // add anchor to each element of specified types
            const elements = document.querySelectorAll(options.typesQuery);
            for (const element of elements)
                addAnchor(element);

            // attach scroll listener to window
            window.addEventListener('scroll', onScroll);
        }

        // when window is scrolled
        function onScroll() {
            // if url has hash and user has scrolled out of view of hash
            // target, remove hash from url
            const tolerance = 100;
            const target = getHashTarget();
            if (target) {
                if (
                    target.getBoundingClientRect().top >
                        window.innerHeight + tolerance ||
                    target.getBoundingClientRect().bottom < 0 - tolerance
                )
                    history.pushState(null, null, ' ');
            }
        }

        // add anchor to element
        function addAnchor(element) {
            let addTo; // element to add anchor button to

            // if figure or table, modify withId and addTo to get expected
            // elements
            if (element.id.indexOf('fig:') === 0) {
                addTo = element.querySelector('figcaption');
            } else if (element.id.indexOf('tbl:') === 0) {
                addTo = element.querySelector('caption');
            } else if (element.id.indexOf('eq:') === 0) {
                addTo = element.querySelector('.eqnos-number');
            }

            addTo = addTo || element;
            const id = element.id || null;

            // do not add anchor if element doesn't have assigned id.
            // id is generated by pandoc and is assumed to be unique and
            // human-readable
            if (!id)
                return;

            // create anchor button
            const anchor = document.createElement('a');
            anchor.innerHTML = document.querySelector('.icon_link').innerHTML;
            anchor.title = 'Link to this part of the document';
            anchor.classList.add('icon_button', 'anchor');
            anchor.dataset.ignore = 'true';
            anchor.href = '#' + id;
            addTo.appendChild(anchor);
        }

        // get element that is target of link or url hash
        function getHashTarget() {
            const hash = window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if figure or table, modify target to get expected element
            if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');
            if (id.indexOf('tbl:') === 0)
                target = target.querySelector('table');

            return target;
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- link icon -->

<template class="icon_link">
    <!-- modified from: https://fontawesome.com/icons/link -->
    <svg width="16" height="16" viewBox="0 0 512 512">
        <path
            fill="currentColor"
            d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
        ></path>
    </svg>
</template>
<!-- accordion plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin allows sections of content under <h2> headings
        // to be collapsible.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'accordion';

        // default plugin options
        const options = {
            // whether to always start expanded ('false'), always start
            // collapsed ('true'), or start collapsed when screen small ('auto')
            startCollapsed: 'auto',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // run through each <h2> heading
            const headings = document.querySelectorAll('h2');
            for (const heading of headings) {
                addArrow(heading);

                // start expanded/collapsed based on option
                if (
                    options.startCollapsed === 'true' ||
                    (options.startCollapsed === 'auto' && isSmallScreen())
                )
                    collapseHeading(heading);
                else
                    expandHeading(heading);
            }

            // attach hash change listener to window
            window.addEventListener('hashchange', onHashChange);
        }

        // when hash (eg manuscript.html#introduction) changes
        function onHashChange() {
            const target = getHashTarget();
            if (target)
                goToElement(target);
        }

        // add arrow to heading
        function addArrow(heading) {
            // add arrow button
            const arrow = document.createElement('button');
            arrow.innerHTML = document.querySelector(
                '.icon_angle_down'
            ).innerHTML;
            arrow.classList.add('icon_button', 'accordion_arrow');
            heading.insertBefore(arrow, heading.firstChild);

            // attach click listener to heading and button
            heading.addEventListener('click', onHeadingClick);
            arrow.addEventListener('click', onArrowClick);
        }

        // determine if on mobile-like device with small screen
        function isSmallScreen() {
            return Math.min(window.innerWidth, window.innerHeight) < 480;
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // get element that is target of hash
        function getHashTarget(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if figure or table, modify target to get expected element
            if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');
            if (id.indexOf('tbl:') === 0)
                target = target.querySelector('table');

            return target;
        }

        // when <h2> heading is clicked
        function onHeadingClick(event) {
            // only collapse if <h2> itself is target of click (eg, user did
            // not click on anchor within <h2>)
            if (event.target === this)
                toggleCollapse(this);
        }

        // when arrow button is clicked
        function onArrowClick() {
            toggleCollapse(this.parentNode);
        }

        // collapse section if expanded, expand if collapsed
        function toggleCollapse(heading) {
            if (heading.dataset.collapsed === 'false')
                collapseHeading(heading);
            else
                expandHeading(heading);
        }

        // elements to exclude from collapse, such as table of contents panel,
        // hypothesis panel, etc
        const exclude = '#toc_panel, div.annotator-frame, #lightbox_overlay';

        // collapse section
        function collapseHeading(heading) {
            heading.setAttribute('data-collapsed', 'true');
            const children = getChildren(heading);
            for (const child of children)
                child.setAttribute('data-collapsed', 'true');
        }

        // expand section
        function expandHeading(heading) {
            heading.setAttribute('data-collapsed', 'false');
            const children = getChildren(heading);
            for (const child of children)
                child.setAttribute('data-collapsed', 'false');
        }

        // get list of elements between this <h2> and next <h2> or <h1>
        // ("children" of the <h2> section)
        function getChildren(heading) {
            return nextUntil(heading, 'h2, h1', exclude);
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get list of elements after a start element up to element matching
        // query
        function nextUntil(element, query, exclude) {
            const elements = [];
            while (element = element.nextElementSibling, element) {
                if (element.matches(query))
                    break;
                if (!element.matches(exclude))
                    elements.push(element);
            }
            return elements;
        }

        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
    <!-- modified from: https://fontawesome.com/icons/angle-down -->
    <svg width="16" height="16" viewBox="0 0 448 512">
        <path
            fill="currentColor"
            d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
        ></path>
    </svg>
</template>
<!-- tooltips plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when the user hovers or
        // focuses a link to a citation or figure, a tooltip appears with a
        // preview of the reference content, along with arrows to navigate
        // between instances of the same reference in the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'tooltips';

        // default plugin options
        const options = {
            // whether user must click off to close tooltip instead of just
            // un-hovering
            clickClose: 'false',
            // delay (in ms) between opening and closing tooltip
            delay: '100',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            const links = getLinks();
            for (const link of links) {
                // attach hover and focus listeners to link
                link.addEventListener('mouseover', onLinkHover);
                link.addEventListener('mouseleave', onLinkUnhover);
                link.addEventListener('focus', onLinkFocus);
                link.addEventListener('touchend', onLinkTouch);
            }

            // attach mouse, key, and resize listeners to window
            window.addEventListener('mousedown', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('keyup', onKeyUp);
            window.addEventListener('resize', onResize);
        }

        // when link is hovered
        function onLinkHover() {
            // function to open tooltip
            const delayOpenTooltip = function() {
                openTooltip(this);
            }.bind(this);

            // run open function after delay
            this.openTooltipTimer = window.setTimeout(
                delayOpenTooltip,
                options.delay
            );
        }

        // when mouse leaves link
        function onLinkUnhover() {
            // cancel opening tooltip
            window.clearTimeout(this.openTooltipTimer);

            // don't close on unhover if option specifies
            if (options.clickClose === 'true')
                return;

            // function to close tooltip
            const delayCloseTooltip = function() {
                // if tooltip open and if mouse isn't over tooltip, close
                const tooltip = document.getElementById('tooltip');
                if (tooltip && !tooltip.matches(':hover'))
                    closeTooltip();
            };

            // run close function after delay
            this.closeTooltipTimer = window.setTimeout(
                delayCloseTooltip,
                options.delay
            );
        }

        // when link is focused (tabbed to)
        function onLinkFocus(event) {
            openTooltip(this);
        }

        // when link is touched on touch screen
        function onLinkTouch(event) {
            // attempt to force hover state on first tap always, and trigger
            // regular link click (and navigation) on second tap
            if (event.target === document.activeElement)
                event.target.click();
            else {
                document.activeElement.blur();
                event.target.focus();
            }
            if (event.cancelable)
                event.preventDefault();
            event.stopPropagation();
            return false;
        }

        // when mouse is clicked anywhere in window
        function onClick(event) {
            closeTooltip();
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            switch (event.key) {
                // trigger click of prev button
                case 'ArrowLeft':
                    const prevButton = document.getElementById(
                        'tooltip_prev_button'
                    );
                    if (prevButton)
                        prevButton.click();
                    break;
                // trigger click of next button
                case 'ArrowRight':
                    const nextButton = document.getElementById(
                        'tooltip_next_button'
                    );
                    if (nextButton)
                        nextButton.click();
                    break;
                // close on esc
                case 'Escape':
                    closeTooltip();
                    break;
            }
        }

        // when window is resized or zoomed
        function onResize() {
            closeTooltip();
        }

        // get all links of types we wish to handle
        function getLinks() {
            const queries = [];
            // exclude buttons, anchor links, toc links, etc
            const exclude =
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            queries.push('a[href^="#ref-"]' + exclude); // citation links
            queries.push('a[href^="#fig:"]' + exclude); // figure links
            const query = queries.join(', ');
            return document.querySelectorAll(query);
        }

        // get links with same target, get index of link in set, get total
        // same links
        function getSameLinks(link) {
            const sameLinks = [];
            const links = getLinks();
            for (const otherLink of links) {
                if (
                    otherLink.getAttribute('href') === link.getAttribute('href')
                )
                    sameLinks.push(otherLink);
            }

            return {
                elements: sameLinks,
                index: sameLinks.indexOf(link),
                total: sameLinks.length
            };
        }

        // open tooltip
        function openTooltip(link) {
            // delete tooltip if it exists, start fresh
            closeTooltip();

            // make tooltip element
            const tooltip = makeTooltip(link);

            // if source couldn't be found and tooltip not made, exit
            if (!tooltip)
                return;

            // make navbar elements
            const navBar = makeNavBar(link);
            if (navBar)
                tooltip.firstElementChild.appendChild(navBar);

            // attach tooltip to page
            document.body.appendChild(tooltip);

            // position tooltip
            const position = function() {
                positionTooltip(link);
            };
            position();

            // if tooltip contains images, position again after they've loaded
            const imgs = tooltip.querySelectorAll('img');
            for (const img of imgs)
                img.addEventListener('load', position);
        }

        // close (delete) tooltip
        function closeTooltip() {
            const tooltip = document.getElementById('tooltip');
            if (tooltip)
                tooltip.remove();
        }

        // make tooltip
        function makeTooltip(link) {
            // get target element that link points to
            const source = getSource(link);

            // if source can't be found, exit
            if (!source)
                return;

            // create new tooltip
            const tooltip = document.createElement('div');
            tooltip.id = 'tooltip';
            const tooltipContent = document.createElement('div');
            tooltipContent.id = 'tooltip_content';
            tooltip.appendChild(tooltipContent);

            // make copy of source node and put in tooltip
            const sourceCopy = makeCopy(source);
            tooltipContent.appendChild(sourceCopy);

            // attach mouse event listeners
            tooltip.addEventListener('click', onTooltipClick);
            tooltip.addEventListener('mousedown', onTooltipClick);
            tooltip.addEventListener('touchstart', onTooltipClick);
            tooltip.addEventListener('mouseleave', onTooltipUnhover);

            // (for interaction with lightbox plugin)
            // transfer click on tooltip copied img to original img
            const sourceImg = source.querySelector('img');
            const sourceCopyImg = sourceCopy.querySelector('img');
            if (sourceImg && sourceCopyImg) {
                const clickImg = function() {
                    sourceImg.click();
                    closeTooltip();
                };
                sourceCopyImg.addEventListener('click', clickImg);
            }

            return tooltip;
        }

        // make carbon copy of html dom element
        function makeCopy(source) {
            const sourceCopy = source.cloneNode(true);

            // delete elements marked with ignore (eg anchor and jump buttons)
            const deleteFromCopy = sourceCopy.querySelectorAll(
                '[data-ignore="true"]'
            );
            for (const element of deleteFromCopy)
                element.remove();

            // delete certain element attributes
            const attributes = [
                'id',
                'data-collapsed',
                'data-selected',
                'data-highlighted',
                'data-glow'
            ];
            for (const attribute of attributes) {
                sourceCopy.removeAttribute(attribute);
                const elements = sourceCopy.querySelectorAll(
                    '[' + attribute + ']'
                );
                for (const element of elements)
                    element.removeAttribute(attribute);
            }

            return sourceCopy;
        }

        // when tooltip is clicked
        function onTooltipClick(event) {
            // when user clicks on tooltip, stop click from transferring
            // outside of tooltip (eg, click off to close tooltip, or eg click
            // off to unhighlight same refs)
            event.stopPropagation();
        }

        // when tooltip is unhovered
        function onTooltipUnhover(event) {
            if (options.clickClose === 'true')
                return;

            // make sure new mouse/touch/focus no longer over tooltip or any
            // element within it
            const tooltip = document.getElementById('tooltip');
            if (!tooltip)
                return;
            if (this.contains(event.relatedTarget))
                return;

            closeTooltip();
        }

        // make nav bar to go betwen prev/next instances of same reference
        function makeNavBar(link) {
            // find other links to the same source
            const sameLinks = getSameLinks(link);

            // don't show nav bar when singular reference
            if (sameLinks.total <= 1)
                return;

            // find prev/next links with same target
            const prevLink = getPrevLink(link, sameLinks);
            const nextLink = getNextLink(link, sameLinks);

            // create nav bar
            const navBar = document.createElement('div');
            navBar.id = 'tooltip_nav_bar';
            const text = sameLinks.index + 1 + ' of ' + sameLinks.total;

            // create nav bar prev/next buttons
            const prevButton = document.createElement('button');
            const nextButton = document.createElement('button');
            prevButton.id = 'tooltip_prev_button';
            nextButton.id = 'tooltip_next_button';
            prevButton.title =
                'Jump to the previous occurence of this item in the document [←]';
            nextButton.title =
                'Jump to the next occurence of this item in the document [→]';
            prevButton.classList.add('icon_button');
            nextButton.classList.add('icon_button');
            prevButton.innerHTML = document.querySelector(
                '.icon_caret_left'
            ).innerHTML;
            nextButton.innerHTML = document.querySelector(
                '.icon_caret_right'
            ).innerHTML;
            navBar.appendChild(prevButton);
            navBar.appendChild(document.createTextNode(text));
            navBar.appendChild(nextButton);

            // attach click listeners to buttons
            prevButton.addEventListener('click', function() {
                onPrevNextClick(link, prevLink);
            });
            nextButton.addEventListener('click', function() {
                onPrevNextClick(link, nextLink);
            });

            return navBar;
        }

        // get previous link with same target
        function getPrevLink(link, sameLinks) {
            if (!sameLinks)
                sameLinks = getSameLinks(link);
            // wrap index to other side if < 1
            let index;
            if (sameLinks.index - 1 >= 0)
                index = sameLinks.index - 1;
            else
                index = sameLinks.total - 1;
            return sameLinks.elements[index];
        }

        // get next link with same target
        function getNextLink(link, sameLinks) {
            if (!sameLinks)
                sameLinks = getSameLinks(link);
            // wrap index to other side if > total
            let index;
            if (sameLinks.index + 1 <= sameLinks.total - 1)
                index = sameLinks.index + 1;
            else
                index = 0;
            return sameLinks.elements[index];
        }

        // get element that is target of link or url hash
        function getSource(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if ref or figure, modify target to get expected element
            if (id.indexOf('ref-') === 0)
                target = target.querySelector('p');
            else if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');

            return target;
        }

        // when prev/next arrow button is clicked
        function onPrevNextClick(link, prevNextLink) {
            if (link && prevNextLink)
                goToElement(prevNextLink, window.innerHeight * 0.5);
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // determine position to place tooltip based on link position in
        // viewport and tooltip size
        function positionTooltip(link, left, top) {
            const tooltipElement = document.getElementById('tooltip');
            if (!tooltipElement)
                return;

            // get convenient vars for position/dimensions of
            // link/tooltip/page/view
            link = getRectInPage(link);
            const tooltip = getRectInPage(tooltipElement);
            const view = getRectInPage();

            // horizontal positioning
            if (left)
                // use explicit value
                left = left;
            else if (link.left + tooltip.width < view.right)
                // fit tooltip to right of link
                left = link.left;
            else if (link.right - tooltip.width > view.left)
                // fit tooltip to left of link
                left = link.right - tooltip.width;
            // center tooltip in view
            else
                left = (view.right - view.left) / 2 - tooltip.width / 2;

            // vertical positioning
            if (top)
                // use explicit value
                top = top;
            else if (link.top - tooltip.height > view.top)
                // fit tooltip above link
                top = link.top - tooltip.height;
            else if (link.bottom + tooltip.height < view.bottom)
                // fit tooltip below link
                top = link.bottom;
            else {
                // center tooltip in view
                top = view.top + view.height / 2 - tooltip.height / 2;
                // nudge off of link to left/right if possible
                if (link.right + tooltip.width < view.right)
                    left = link.right;
                else if (link.left - tooltip.width > view.left)
                    left = link.left - tooltip.width;
            }

            tooltipElement.style.left = left + 'px';
            tooltipElement.style.top = top + 'px';
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get position of element relative to page
        function getRectInPage(element) {
            const rect = getRectInView(element);
            const body = getRectInView(document.body);

            const newRect = {};
            newRect.left = rect.left - body.left;
            newRect.top = rect.top - body.top;
            newRect.right = rect.right - body.left;
            newRect.bottom = rect.bottom - body.top;
            newRect.width = rect.width;
            newRect.height = rect.height;

            return newRect;
        }

        // (for interaction with accordion plugin)
        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // (for interaction with accordion plugin)
        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // (for interaction with accordion plugin)
        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
    <!-- modified from: https://fontawesome.com/icons/caret-left -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
        ></path>
    </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
    <!-- modified from: https://fontawesome.com/icons/caret-right -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
        ></path>
    </svg>
</template>
<!-- jump to first plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin adds a button next to each reference entry,
        // figure, and table that jumps the page to the first occurrence of a
        // link to that item in the manuscript.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'jumpToFirst';

        // default plugin options
        const options = {
            // whether to add buttons next to reference entries
            references: 'true',
            // whether to add buttons next to figures
            figures: 'true',
            // whether to add buttons next to tables
            tables: 'true',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            if (options.references !== 'false')
                makeReferenceButtons();
            if (options.figures !== 'false')
                makeFigureButtons();
            if (options.tables !== 'false')
                makeTableButtons();
        }

        // when jump button clicked
        function onButtonClick() {
            const first = getFirstOccurrence(this.dataset.id);
            if (!first)
                return;

            // update url hash so navigating "back" in history will return
            // user to jump button
            window.location.hash = this.dataset.id;
            // scroll to link
            window.setTimeout(function() {
                goToElement(first, window.innerHeight * 0.5);
            }, 0);
        }

        // get first occurence of link to item in document
        function getFirstOccurrence(id) {
            let query = 'a';
            query += '[href="#' + id + '"]';
            // exclude buttons, anchor links, toc links, etc
            query +=
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            return document.querySelector(query);
        }

        // add button next to each reference entry
        function makeReferenceButtons() {
            const references = document.querySelectorAll('div[id^="ref-"]');
            for (const reference of references) {
                // get reference id and element to add button to
                const id = reference.id;
                const container = reference.firstElementChild;
                const first = getFirstOccurrence(id);

                // if can't find link to reference, ignore
                if (!first)
                    continue;

                // make jump button
                let button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this reference in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.innerHTML = button.outerHTML + container.innerHTML;
                button = container.firstElementChild;
                button.addEventListener('click', onButtonClick);
            }
        }

        // add button next to each figure
        function makeFigureButtons() {
            const figures = document.querySelectorAll('[id^="fig:"]');
            for (const figure of figures) {
                // get figure id and element to add button to
                const id = figure.id;
                const container = figure.querySelector('figcaption') || figure;
                const first = getFirstOccurrence(id);

                // if can't find link to figure, ignore
                if (!first)
                    continue;

                // make jump button
                const button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this figure in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.insertBefore(button, container.firstElementChild);
                button.addEventListener('click', onButtonClick);
            }
        }

        // add button next to each figure
        function makeTableButtons() {
            const tables = document.querySelectorAll('[id^="tbl:"]');
            for (const table of tables) {
                // get ref id and element to add button to
                const id = table.id;
                const container = table.querySelector('caption') || table;
                const first = getFirstOccurrence(id);

                // if can't find link to table, ignore
                if (!first)
                    continue;

                // make jump button
                const button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this table in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.insertBefore(button, container.firstElementChild);
                button.addEventListener('click', onButtonClick);
            }
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // (for interaction with accordion plugin)
        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
    <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
    <svg width="16" height="16" viewBox="0 0 320 512">
        <path
            fill="currentColor"
            d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
        ></path>
    </svg>
</template>
<!-- link highlight plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when a user hovers or
        // focuses a link, other links that have the same target will be
        // highlighted. It also makes it such that when clicking a link, the
        // target of the link (eg reference, figure, table) is briefly
        // highlighted.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'linkHighlight';

        // default plugin options
        const options = {
            // whether to also highlight links that go to external urls
            externalLinks: 'false',
            // whether user must click off to unhighlight instead of just
            // un-hovering
            clickUnhighlight: 'false',
            // whether to also highlight links that are unique
            highlightUnique: 'true',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            const links = getLinks();
            for (const link of links) {
                // attach mouse and focus listeners to link
                link.addEventListener('mouseenter', onLinkFocus);
                link.addEventListener('focus', onLinkFocus);
                link.addEventListener('mouseleave', onLinkUnhover);
            }

            // attach click and hash change listeners to window
            window.addEventListener('click', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('hashchange', onHashChange);

            // run hash change on window load in case user has navigated
            // directly to hash
            onHashChange();
        }

        // when link is focused (tabbed to) or hovered
        function onLinkFocus() {
            highlight(this);
        }

        // when link is unhovered
        function onLinkUnhover() {
            if (options.clickUnhighlight !== 'true')
                unhighlightAll();
        }

        // when the mouse is clicked anywhere in window
        function onClick(event) {
            unhighlightAll();
        }

        // when hash (eg manuscript.html#introduction) changes
        function onHashChange() {
            const target = getHashTarget();
            if (target)
                glowElement(target);
        }

        // get element that is target of link or url hash
        function getHashTarget(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            return target;
        }

        // start glow sequence on an element
        function glowElement(element) {
            const startGlow = function() {
                onGlowEnd();
                element.dataset.glow = 'true';
                element.addEventListener('animationend', onGlowEnd);
            };
            const onGlowEnd = function() {
                element.removeAttribute('data-glow');
                element.removeEventListener('animationend', onGlowEnd);
            };
            startGlow();
        }

        // highlight link and all others with same target
        function highlight(link) {
            // force unhighlight all to start fresh
            unhighlightAll();

            // get links with same target
            if (!link)
                return;
            const sameLinks = getSameLinks(link);

            // if link unique and option is off, exit and don't highlight
            if (sameLinks.length <= 1 && options.highlightUnique !== 'true')
                return;

            // highlight all same links, and "select" (special highlight) this
            // one
            for (const sameLink of sameLinks) {
                if (sameLink === link)
                    sameLink.setAttribute('data-selected', 'true');
                else
                    sameLink.setAttribute('data-highlighted', 'true');
            }
        }

        // unhighlight all links
        function unhighlightAll() {
            const links = getLinks();
            for (const link of links) {
                link.setAttribute('data-selected', 'false');
                link.setAttribute('data-highlighted', 'false');
            }
        }

        // get links with same target
        function getSameLinks(link) {
            const results = [];
            const links = getLinks();
            for (const otherLink of links) {
                if (
                    otherLink.getAttribute('href') === link.getAttribute('href')
                )
                    results.push(otherLink);
            }
            return results;
        }

        // get all links of types we wish to handle
        function getLinks() {
            let query = 'a';
            if (options.externalLinks !== 'true')
                query += '[href^="#"]';
            // exclude buttons, anchor links, toc links, etc
            query +=
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            return document.querySelectorAll(query);
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>
<!-- table of contents plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin provides a "table of contents" (toc) panel on
        // the side of the document that allows the user to conveniently
        // navigate between sections of the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'tableOfContents';

        // default plugin options
        const options = {
            // which types of elements to add links for, in
            // "document.querySelector" format
            typesQuery: 'h1, h2, h3',
            // whether default behavior is to be closed ('false'), open
            // ('true'), or only open when screen wide enough to fit panel
            // ('auto'). note: still always starts closed when page loads.
            open: 'auto',
            // if list item is more than this many characters, text will be
            // truncated
            charLimit: '50',
            // whether or not to show bullets next to each toc item
            bullets: 'false',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // make toc panel and populate with entries (links to document
            // sections)
            const panel = makePanel();
            if (!panel)
                return;
            makeEntries(panel);
            document.body.insertBefore(panel, document.body.firstChild);

            closePanel();

            // attach click, scroll, and hash change listeners to window
            window.addEventListener('click', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('scroll', onScroll);
            window.addEventListener('hashchange', onScroll);
            window.addEventListener('keyup', onKeyUp);
            onScroll();

            // add class to push document body down out of way of toc button
            document.body.classList.add('toc_body_nudge');
        }

        // determine if screen wide enough to fit toc panel
        function isSmallScreen() {
            // in default theme:
            // 816px = 8.5in = width of "page" (<body>) element
            // 260px = min width of toc panel (*2 for both sides of <body>)
            return window.innerWidth < 816 + 260 * 2;
        }

        // open/close panel based on option and screen size
        function openOrClosePanel() {
            if (
                options.open === 'true' ||
                (options.open === 'auto' && !isSmallScreen())
            )
                openPanel();
            else
                closePanel();
        }

        // when mouse is clicked anywhere in window
        function onClick() {
            const panel = document.getElementById('toc_panel');
            if (!panel)
                return;

            if (panel.dataset.open === 'true')
                openOrClosePanel();
        }

        // when window is scrolled or hash changed
        function onScroll() {
            highlightViewed();
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            // close on esc
            if (event.key === 'Escape')
                closePanel();
        }

        // find entry of currently viewed document section in toc and highlight
        function highlightViewed() {
            const firstId = getFirstInView(options.typesQuery);

            // get toc entries (links), unhighlight all, then highlight viewed
            const list = document.getElementById('toc_list');
            if (!firstId || !list)
                return;
            const links = list.querySelectorAll('a');
            for (const link of links)
                link.dataset.viewing = 'false';
            const link = list.querySelector('a[href="#' + firstId + '"]');
            if (!link)
                return;
            link.dataset.viewing = 'true';
        }

        // get first or previous toc listed element in top half of view
        function getFirstInView(query) {
            // get all elements matching query and with id
            const elements = document.querySelectorAll(query);
            const elementsWithIds = [];
            for (const element of elements) {
                if (element.id)
                    elementsWithIds.push(element);
            }


            // get first or previous element in top half of view
            for (let i = 0; i < elementsWithIds.length; i++) {
                const element = elementsWithIds[i];
                const prevElement = elementsWithIds[Math.max(0, i - 1)];
                if (element.getBoundingClientRect().top >= 0) {
                    if (
                        element.getBoundingClientRect().top <
                        window.innerHeight / 2
                    )
                        return element.id;
                    else
                        return prevElement.id;
                }
            }
        }

        // make panel
        function makePanel() {
            // create panel
            const panel = document.createElement('div');
            panel.id = 'toc_panel';
            if (options.bullets === 'true')
                panel.dataset.bullets = 'true';

            // create header
            const header = document.createElement('div');
            header.id = 'toc_header';

            // create toc button
            const button = document.createElement('button');
            button.id = 'toc_button';
            button.innerHTML = document.querySelector('.icon_th_list').innerHTML;
            button.title = 'Table of Contents';
            button.classList.add('icon_button');

            // create header text
            const text = document.createElement('h3');
            text.innerHTML = 'View Table of Contents';

            // create container for toc list
            const list = document.createElement('div');
            list.id = 'toc_list';

            // attach click listeners
            panel.addEventListener('click', onPanelClick);
            header.addEventListener('click', onHeaderClick);
            button.addEventListener('click', onButtonClick);

            // attach elements
            header.appendChild(button);
            header.appendChild(text);
            panel.appendChild(header);
            panel.appendChild(list);

            return panel;
        }

        // create toc entries (links) to each element of the specified types
        function makeEntries(panel) {
            const elements = document.querySelectorAll(options.typesQuery);
            for (const element of elements) {
                // do not add link if element doesn't have assigned id
                if (!element.id)
                    continue;

                // create link/list item
                const link = document.createElement('a');
                link.classList.add('toc_link');
                switch (element.tagName.toLowerCase()) {
                    case 'h1':
                        link.dataset.level = '1';
                        break;
                    case 'h2':
                        link.dataset.level = '2';
                        break;
                    case 'h3':
                        link.dataset.level = '3';
                        break;
                    case 'h4':
                        link.dataset.level = '4';
                        break;
                }
                link.title = element.innerText;
                let text = element.innerText;
                if (text.length > options.charLimit)
                    text = text.slice(0, options.charLimit) + '...';
                link.innerHTML = text;
                link.href = '#' + element.id;
                link.addEventListener('click', onLinkClick);

                // attach link
                panel.querySelector('#toc_list').appendChild(link);
            }
        }

        // when panel is clicked
        function onPanelClick(event) {
            // stop click from propagating to window/document and closing panel
            event.stopPropagation();
        }

        // when header itself is clicked
        function onHeaderClick(event) {
            togglePanel();
        }

        // when button is clicked
        function onButtonClick(event) {
            togglePanel();
            // stop header underneath button from also being clicked
            event.stopPropagation();
        }

        // when link is clicked
        function onLinkClick() {
            openOrClosePanel();
        }

        // open panel if closed, close if opened
        function togglePanel() {
            const panel = document.getElementById('toc_panel');
            if (!panel)
                return;

            if (panel.dataset.open === 'true')
                closePanel();
            else
                openPanel();
        }

        // open panel
        function openPanel() {
            const panel = document.getElementById('toc_panel');
            if (panel)
                panel.dataset.open = 'true';
        }

        // close panel
        function closePanel() {
            const panel = document.getElementById('toc_panel');
            if (panel)
                panel.dataset.open = 'false';
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- th list icon -->

<template class="icon_th_list">
    <!-- modified from: https://fontawesome.com/icons/th-list -->
    <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
        <path
            fill="currentColor"
            d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
            tabindex="-1"
        ></path>
    </svg>
</template>
<!-- lightbox plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when a user clicks on an
        // image, the image fills the screen and the user can pan/drag/zoom
        // the image and navigate between other images in the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'lightbox';

        // default plugin options
        const options = {
            // list of possible zoom/scale factors
            zoomSteps:
                '0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1,' +
                '1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8',
            // whether to fit image to view ('fit'), display at 100% and shrink
            // if necessary ('shrink'), or always display at 100% ('100')
            defaultZoom: 'fit',
            // whether to zoom in/out toward center of view ('true') or mouse
            // ('false')
            centerZoom: 'false',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // run through each <img> element
            const imgs = document.querySelectorAll('figure > img');
            let count = 1;
            for (const img of imgs) {
                img.classList.add('lightbox_document_img');
                img.dataset.number = count;
                img.dataset.total = imgs.length;
                img.addEventListener('click', openLightbox);
                count++;
            }

            // attach mouse and key listeners to window
            window.addEventListener('mousemove', onWindowMouseMove);
            window.addEventListener('keyup', onKeyUp);
        }

        // when mouse is moved anywhere in window
        function onWindowMouseMove(event) {
            window.mouseX = event.clientX;
            window.mouseY = event.clientY;
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            switch (event.key) {
                // trigger click of prev button
                case 'ArrowLeft':
                    const prevButton = document.getElementById(
                        'lightbox_prev_button'
                    );
                    if (prevButton)
                        prevButton.click();
                    break;
                // trigger click of next button
                case 'ArrowRight':
                    const nextButton = document.getElementById(
                        'lightbox_next_button'
                    );
                    if (nextButton)
                        nextButton.click();
                    break;
                // close on esc
                case 'Escape':
                    closeLightbox();
                    break;
            }
        }

        // open lightbox
        function openLightbox() {
            const lightbox = makeLightbox(this);
            if (!lightbox)
                return;

            blurBody(lightbox);
            document.body.appendChild(lightbox);
        }

        // make lightbox
        function makeLightbox(img) {
            // delete lightbox if it exists, start fresh
            closeLightbox();

            // create screen overlay containing lightbox
            const overlay = document.createElement('div');
            overlay.id = 'lightbox_overlay';

            // create image info boxes
            const numberInfo = document.createElement('div');
            const zoomInfo = document.createElement('div');
            numberInfo.id = 'lightbox_number_info';
            zoomInfo.id = 'lightbox_zoom_info';

            // create container for image
            const imageContainer = document.createElement('div');
            imageContainer.id = 'lightbox_image_container';
            const lightboxImg = makeLightboxImg(
                img,
                imageContainer,
                numberInfo,
                zoomInfo
            );
            imageContainer.appendChild(lightboxImg);

            // create bottom container for caption and navigation buttons
            const bottomContainer = document.createElement('div');
            bottomContainer.id = 'lightbox_bottom_container';
            const caption = makeCaption(img);
            const prevButton = makePrevButton(img);
            const nextButton = makeNextButton(img);
            bottomContainer.appendChild(prevButton);
            bottomContainer.appendChild(caption);
            bottomContainer.appendChild(nextButton);

            // attach top middle and bottom to overlay
            overlay.appendChild(numberInfo);
            overlay.appendChild(zoomInfo);
            overlay.appendChild(imageContainer);
            overlay.appendChild(bottomContainer);

            return overlay;
        }

        // make <img> object that is intuitively draggable and zoomable
        function makeLightboxImg(
            sourceImg,
            container,
            numberInfoBox,
            zoomInfoBox
        ) {
            // create copy of source <img>
            const img = sourceImg.cloneNode(true);
            img.classList.remove('lightbox_document_img');
            img.removeAttribute('id');
            img.removeAttribute('width');
            img.removeAttribute('height');
            img.style.position = 'unset';
            img.style.margin = '0';
            img.style.padding = '0';
            img.style.width = '';
            img.style.height = '';
            img.style.minWidth = '';
            img.style.minHeight = '';
            img.style.maxWidth = '';
            img.style.maxHeight = '';
            img.id = 'lightbox_img';

            // build sorted list of unique zoomSteps, always including a 100%
            let zoomSteps = [];
            const optionsZooms = options.zoomSteps.split(/[^0-9.]/);
            for (const optionZoom of optionsZooms) {
                const newZoom = parseFloat(optionZoom);
                if (newZoom && !zoomSteps.includes(newZoom))
                    zoomSteps.push(newZoom);
            }
            if (!zoomSteps.includes(1))
                zoomSteps.push(1);
            zoomSteps = zoomSteps.sort(function sortNumber(a, b) {
                return a - b;
            });

            // <img> object property variables
            let zoom = 1;
            let translateX = 0;
            let translateY = 0;
            let clickMouseX = undefined;
            let clickMouseY = undefined;
            let clickTranslateX = undefined;
            let clickTranslateY = undefined;

            updateNumberInfo();

            // update image numbers displayed in info box
            function updateNumberInfo() {
                numberInfoBox.innerHTML =
                    sourceImg.dataset.number + ' of ' + sourceImg.dataset.total;
            }

            // update zoom displayed in info box
            function updateZoomInfo() {
                let zoomInfo = zoom * 100;
                if (!Number.isInteger(zoomInfo))
                    zoomInfo = zoomInfo.toFixed(2);
                zoomInfoBox.innerHTML = zoomInfo + '%';
            }

            // move to closest zoom step above current zoom
            const zoomIn = function() {
                for (const zoomStep of zoomSteps) {
                    if (zoomStep > zoom) {
                        zoom = zoomStep;
                        break;
                    }
                }
                updateTransform();
            };

            // move to closest zoom step above current zoom
            const zoomOut = function() {
                zoomSteps.reverse();
                for (const zoomStep of zoomSteps) {
                    if (zoomStep < zoom) {
                        zoom = zoomStep;
                        break;
                    }
                }
                zoomSteps.reverse();

                updateTransform();
            };

            // update display of <img> based on scale/translate properties
            const updateTransform = function() {
                // set transform
                img.style.transform =
                    'translate(' +
                    (translateX || 0) +
                    'px,' +
                    (translateY || 0) +
                    'px) scale(' +
                    (zoom || 1) +
                    ')';

                // get new width/height after scale
                const rect = img.getBoundingClientRect();
                // limit translate
                translateX = Math.max(translateX, -rect.width / 2);
                translateX = Math.min(translateX, rect.width / 2);
                translateY = Math.max(translateY, -rect.height / 2);
                translateY = Math.min(translateY, rect.height / 2);

                // set transform
                img.style.transform =
                    'translate(' +
                    (translateX || 0) +
                    'px,' +
                    (translateY || 0) +
                    'px) scale(' +
                    (zoom || 1) +
                    ')';

                updateZoomInfo();
            };

            // fit <img> to container
            const fit = function() {
                // no x/y offset, 100% zoom by default
                translateX = 0;
                translateY = 0;
                zoom = 1;

                // widths of <img> and container
                const imgWidth = img.naturalWidth;
                const imgHeight = img.naturalHeight;
                const containerWidth = parseFloat(
                    window.getComputedStyle(container).width
                );
                const containerHeight = parseFloat(
                    window.getComputedStyle(container).height
                );

                // how much zooming is needed to fit <img> to container
                const xRatio = imgWidth / containerWidth;
                const yRatio = imgHeight / containerHeight;
                const maxRatio = Math.max(xRatio, yRatio);
                const newZoom = 1 / maxRatio;

                // fit <img> to container according to option
                if (options.defaultZoom === 'shrink') {
                    if (maxRatio > 1)
                        zoom = newZoom;
                } else if (options.defaultZoom === 'fit')
                    zoom = newZoom;

                updateTransform();
            };

            // when mouse wheel is rolled anywhere in container
            const onContainerWheel = function(event) {
                if (!event)
                    return;

                // let ctrl + mouse wheel to zoom behave as normal
                if (event.ctrlKey)
                    return;

                // prevent normal scroll behavior
                event.preventDefault();
                event.stopPropagation();

                // point around which to scale img
                const viewRect = container.getBoundingClientRect();
                const viewX = (viewRect.left + viewRect.right) / 2;
                const viewY = (viewRect.top + viewRect.bottom) / 2;
                const originX = options.centerZoom === 'true' ? viewX : mouseX;
                const originY = options.centerZoom === 'true' ? viewY : mouseY;

                // get point on image under origin
                const oldRect = img.getBoundingClientRect();
                const oldPercentX = (originX - oldRect.left) / oldRect.width;
                const oldPercentY = (originY - oldRect.top) / oldRect.height;

                // increment/decrement zoom
                if (event.deltaY < 0)
                    zoomIn();
                if (event.deltaY > 0)
                    zoomOut();

                // get offset between previous image point and origin
                const newRect = img.getBoundingClientRect();
                const offsetX =
                    originX - (newRect.left + newRect.width * oldPercentX);
                const offsetY =
                    originY - (newRect.top + newRect.height * oldPercentY);

                // translate image to keep image point under origin
                translateX += offsetX;
                translateY += offsetY;

                // perform translate
                updateTransform();
            };

            // when container is clicked
            function onContainerClick(event) {
                // if container itself is target of click, and not other
                // element above it
                if (event.target === this)
                    closeLightbox();
            }

            // when mouse button is pressed on image
            const onImageMouseDown = function(event) {
                // store original mouse position relative to image
                clickMouseX = window.mouseX;
                clickMouseY = window.mouseY;
                clickTranslateX = translateX;
                clickTranslateY = translateY;
                event.stopPropagation();
                event.preventDefault();
            };

            // when mouse button is released anywhere in window
            const onWindowMouseUp = function(event) {
                // reset original mouse position
                clickMouseX = undefined;
                clickMouseY = undefined;
                clickTranslateX = undefined;
                clickTranslateY = undefined;

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('mouseup', onWindowMouseUp);
            };

            // when mouse is moved anywhere in window
            const onWindowMouseMove = function(event) {
                if (
                    clickMouseX === undefined ||
                    clickMouseY === undefined ||
                    clickTranslateX === undefined ||
                    clickTranslateY === undefined
                )
                    return;

                // offset image based on original and current mouse position
                translateX = clickTranslateX + window.mouseX - clickMouseX;
                translateY = clickTranslateY + window.mouseY - clickMouseY;
                updateTransform();
                event.preventDefault();

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('mousemove', onWindowMouseMove);
            };

            // when window is resized
            const onWindowResize = function(event) {
                fit();

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('resize', onWindowResize);
            };

            // attach the necessary event listeners
            img.addEventListener('dblclick', fit);
            img.addEventListener('mousedown', onImageMouseDown);
            container.addEventListener('wheel', onContainerWheel);
            container.addEventListener('mousedown', onContainerClick);
            container.addEventListener('touchstart', onContainerClick);
            window.addEventListener('mouseup', onWindowMouseUp);
            window.addEventListener('mousemove', onWindowMouseMove);
            window.addEventListener('resize', onWindowResize);

            // run fit() after lightbox atttached to document and <img> Loaded
            // so needed container and img dimensions available
            img.addEventListener('load', fit);

            return img;
        }

        // make caption
        function makeCaption(img) {
            const caption = document.createElement('div');
            caption.id = 'lightbox_caption';
            const captionSource = img.nextElementSibling;
            if (captionSource.tagName.toLowerCase() === 'figcaption') {
                const captionCopy = makeCopy(captionSource);
                caption.innerHTML = captionCopy.innerHTML;
            }

            caption.addEventListener('touchstart', function(event) {
                event.stopPropagation();
            });

            return caption;
        }

        // make carbon copy of html dom element
        function makeCopy(source) {
            const sourceCopy = source.cloneNode(true);

            // delete elements marked with ignore (eg anchor and jump buttons)
            const deleteFromCopy = sourceCopy.querySelectorAll(
                '[data-ignore="true"]'
            );
            for (const element of deleteFromCopy)
                element.remove();

            // delete certain element attributes
            const attributes = [
                'id',
                'data-collapsed',
                'data-selected',
                'data-highlighted',
                'data-glow'
            ];
            for (const attribute of attributes) {
                sourceCopy.removeAttribute(attribute);
                const elements = sourceCopy.querySelectorAll(
                    '[' + attribute + ']'
                );
                for (const element of elements)
                    element.removeAttribute(attribute);
            }

            return sourceCopy;
        }

        // make button to jump to previous image in document
        function makePrevButton(img) {
            const prevButton = document.createElement('button');
            prevButton.id = 'lightbox_prev_button';
            prevButton.title = 'Jump to the previous image in the document [←]';
            prevButton.classList.add('icon_button', 'lightbox_button');
            prevButton.innerHTML = document.querySelector(
                '.icon_caret_left'
            ).innerHTML;

            // attach click listeners to button
            prevButton.addEventListener('click', function() {
                getPrevImg(img).click();
            });

            return prevButton;
        }

        // make button to jump to next image in document
        function makeNextButton(img) {
            const nextButton = document.createElement('button');
            nextButton.id = 'lightbox_next_button';
            nextButton.title = 'Jump to the next image in the document [→]';
            nextButton.classList.add('icon_button', 'lightbox_button');
            nextButton.innerHTML = document.querySelector(
                '.icon_caret_right'
            ).innerHTML;

            // attach click listeners to button
            nextButton.addEventListener('click', function() {
                getNextImg(img).click();
            });

            return nextButton;
        }

        // get previous image in document
        function getPrevImg(img) {
            const imgs = document.querySelectorAll('.lightbox_document_img');

            // find index of provided img
            let index;
            for (index = 0; index < imgs.length; index++) {
                if (imgs[index] === img)
                    break;
            }


            // wrap index to other side if < 1
            if (index - 1 >= 0)
                index--;
            else
                index = imgs.length - 1;
            return imgs[index];
        }

        // get next image in document
        function getNextImg(img) {
            const imgs = document.querySelectorAll('.lightbox_document_img');

            // find index of provided img
            let index;
            for (index = 0; index < imgs.length; index++) {
                if (imgs[index] === img)
                    break;
            }


            // wrap index to other side if > total
            if (index + 1 <= imgs.length - 1)
                index++;
            else
                index = 0;
            return imgs[index];
        }

        // close lightbox
        function closeLightbox() {
            focusBody();

            const lightbox = document.getElementById('lightbox_overlay');
            if (lightbox)
                lightbox.remove();
        }

        // make all elements behind lightbox non-focusable
        function blurBody(overlay) {
            const all = document.querySelectorAll('*');
            for (const element of all)
                element.tabIndex = -1;
            document.body.classList.add('body_no_scroll');
        }

        // make all elements focusable again
        function focusBody() {
            const all = document.querySelectorAll('*');
            for (const element of all)
                element.removeAttribute('tabIndex');
            document.body.classList.remove('body_no_scroll');
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
    <!-- modified from: https://fontawesome.com/icons/caret-left -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
        ></path>
    </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
    <!-- modified from: https://fontawesome.com/icons/caret-right -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
        ></path>
    </svg>
</template>
<!-- attributes plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin allows arbitrary HTML attributes to be attached
        // to (almost) any element. Place an HTML comment inside or next to the
        // desired element in the format <!-- $attribute="value" -->

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'attributes';

        // default plugin options
        const options = {
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // get list of comments in document
            const comments = findComments();

            for(const comment of comments)
                if (comment.parentElement)
                    addAttributes(
                        comment.parentElement,
                        comment.nodeValue.trim()
                    );
        }

        // add html attributes to specified element based on string of 
        // html attributes and values
        function addAttributes(element, text) {
            // regex's for finding attribute/value pairs in the format of
            // attribute="value" or attribute='value
            const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
            const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

            // loop through attribute/value pairs
            let match;
            while(match = text.match(regex2) || text.match(regex1)) {
                // get attribute and value from regex capture groups
                let attribute = match[1];
                let value = match[2];

                // remove from string
                text = text.substring(match.index + match[0].length);

                if (!attribute || !value)
                    break;

                // set attribute of parent element
                try {
                    element.setAttribute(attribute, value);
                } catch(error) {
                    console.log(error);
                }

                // special case for colspan
                if (attribute === 'colspan')
                    removeTableCells(element, value);
            }
        }

        // get list of comment elements in document
        function findComments() {
            const comments = [];

            // iterate over comment nodes in document
            function acceptNode(node) {
                return NodeFilter.FILTER_ACCEPT;
            }
            const iterator = document.createNodeIterator(
                document.body,
                NodeFilter.SHOW_COMMENT,
                acceptNode
            );
            let node;
            while(node = iterator.nextNode())
                comments.push(node);

            return comments;
        }

        // remove certain number of cells after specified cell
        function removeTableCells(cell, number) {
            number = parseInt(number);
            if (!number)
                return;

            // remove elements
            for(; number > 1; number--) {
                if (cell.nextElementSibling)
                    cell.nextElementSibling.remove();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>
<!-- math plugin configuration -->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "CommonHTML": { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        "SVG": { linebreaks: { automatic: true } },
        "fast-preview": { disabled: true }
    });
</script>

<!-- math plugin -->

<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'>
    // /////////////////////////
    // DESCRIPTION
    // /////////////////////////

    // This third-party plugin 'MathJax' allows the proper rendering of
    // math/equations written in LaTeX.

    // https://www.mathjax.org/
</script>
<!-- annotations plugin -->

<script>
    // /////////////////////////
    // DESCRIPTION
    // /////////////////////////

    // This third-party plugin 'Hypothesis' allows public annotation of the
    // manuscript.

    // https://web.hypothes.is/

    // plugin configuration
    window.hypothesisConfig = function() {
        return {
            branding: {
                accentColor: '#2196f3',
                appBackgroundColor: '#f8f8f8',
                ctaBackgroundColor: '#f8f8f8',
                ctaTextColor: '#000000',
                selectionFontFamily: 'Open Sans, Helvetica, sans serif',
                annotationFontFamily: 'Open Sans, Helvetica, sans serif'
            }
        };
    };

    // hypothesis client script
    const embed = 'https://hypothes.is/embed.js';
    // hypothesis annotation count query url
    const query = 'https://api.hypothes.is/api/search?limit=0&url='

    
    // start script
    function start() {
        const button = makeButton();
        document.body.insertBefore(button, document.body.firstChild);
        insertCount(button);
    }

    // make button
    function makeButton() {
        // create button
        const button = document.createElement('button');
        button.id = 'hypothesis_button';
        button.innerHTML = document.querySelector('.icon_hypothesis').innerHTML;
        button.title = 'Hypothesis annotations';
        button.classList.add('icon_button');

        function onClick(event) {
            onButtonClick(event, button);
        }

        // attach click listeners
        button.addEventListener('click', onClick);

        return button;
    }

    // insert annotations count
    async function insertCount(button) {
        // get annotation count from Hypothesis based on url
        let count = '-';
        try {
            const canonical = document.querySelector('link[rel="canonical"]');
            const location = window.location;
            const url = encodeURIComponent((canonical || location).href);
            const response = await fetch(query + url);
            const json = await response.json();
            count = json.total || '-';
        } catch(error) {
            console.log(error);
        }
        
        // put count into button
        const counter = document.createElement('span');
        counter.id = 'hypothesis_count';
        counter.innerHTML = count;
        button.title = 'View ' + count + ' Hypothesis annotations';
        button.append(counter);
    }

    // when button is clicked
    function onButtonClick(event, button) {
        const script = document.createElement('script');
        script.src = embed;
        document.body.append(script);
        button.remove();
    }

    window.addEventListener('load', start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
    <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
    <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
        <path
            fill="currentColor"
            d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
            tabindex="-1"
        ></path>
    </svg>
</template>
<!-- analytics plugin -->

<!-- copy and paste code from Google Analytics or similar service here -->
</body>
</html>
